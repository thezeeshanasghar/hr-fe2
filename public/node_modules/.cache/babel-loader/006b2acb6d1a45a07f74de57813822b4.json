{"ast":null,"code":"var _jsxFileName = \"E:\\\\employee management system\\\\hr\\\\new theme\\\\Fuse-React-v5.2.1-skeleton\\\\src\\\\app\\\\main\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { withStyles, Button, Card, CardContent, Checkbox, Divider, FormControl, FormControlLabel, TextField, Typography } from '@material-ui/core';\nimport { darken } from '@material-ui/core/styles/colorManipulator';\nimport { FuseAnimate } from '@fuse';\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\nimport _ from '@lodash';\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport defaultUrl from '../../../app/services/constant/constant';\nimport { connect } from 'react-redux';\nimport { setUser } from '../../../app/auth/store/actions/login.actions';\nimport Messages from '../toaster';\n\nconst styles = theme => ({\n  root: {\n    background: 'linear-gradient(to right, ' + theme.palette.primary.dark + ' 0%, ' + darken(theme.palette.primary.dark, 0.5) + ' 100%)',\n    color: theme.palette.primary.contrastText\n  }\n});\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      Isvisble: 0,\n      redirect: localStorage.getItem('IsLoggedIn')\n    };\n\n    this.handleChange = event => {\n      this.setState(_.set({ ...this.state\n      }, event.target.name, event.target.type === 'checkbox' ? event.target.checked : event.target.value));\n    };\n\n    this.parseJwt = function (token) {\n      var base64Url = token.split('.')[1];\n      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n      return JSON.parse(jsonPayload);\n    };\n\n    this.login = () => {\n      //  let history = useHistory();\n      var obj = {\n        Email: this.state.email,\n        Password: this.state.password\n      };\n      axios.interceptors.request.use(function (config) {\n        return config;\n      }, function (error) {\n        console.log('Error');\n        return Promise.reject(error);\n      });\n      axios({\n        method: \"get\",\n        url: defaultUrl + \"userLogin/\" + this.state.email + \"/\" + this.state.password,\n        // data: JSON.stringify(obj),\n        headers: {\n          // 'Authorization': `bearer ${token}`,\n          \"Content-Type\": \"application/json;charset=utf-8\"\n        }\n      }).then(response => {\n        if (response.data != \"Invalid Credentials\") {\n          localStorage.setItem('IsLoggedIn', true);\n          localStorage.setItem('token', response.data);\n          var tokendata = this.parseJwt(response.data);\n          this.props.setUser({\n            role: 'admin',\n            data: {\n              'displayName': tokendata.Name,\n              'photoURL': 'assets/images/avatars/Velazquez.jpg',\n              'email': tokendata.Name + \"@gmail.com\",\n              shortcuts: ['calendar', 'mail', 'contacts', 'todo']\n            }\n          });\n          this.setState({\n            redirect: true\n          });\n        } else {\n          this.setState({\n            Isvisble: 1\n          });\n        }\n      }).catch(error => {\n        console.log(\"error\");\n        Messages.error(error.data);\n        this.setState({\n          email: \"\",\n          password: ''\n        });\n      }).finally(() => {});\n    };\n\n    this.setUser = this.props;\n    this.submit = this.submit.bind(this);\n  }\n\n  submit(event) {\n    console.log(event.keyCode);\n\n    if (this.canBeSubmitted()) {\n      if (event.keyCode === 13) this.login();\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.submit, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.submit, false);\n  }\n\n  canBeSubmitted() {\n    const {\n      email,\n      password\n    } = this.state;\n    return email.length > 0 && password.length > 0;\n  }\n\n  render() {\n    const {\n      redirect\n    } = this.state;\n\n    if (redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 16\n        }\n      });\n    }\n\n    const {\n      classes\n    } = this.props;\n    const {\n      email,\n      password,\n      remember\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(classes.root, \"flex flex-col flex-auto flex-no-shrink p-24 md:flex-row md:p-0\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex flex-col flex-no-grow items-center text-white p-16 text-center md:p-128 md:items-start md:flex-no-shrink md:flex-1 md:text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FuseAnimate, {\n      animation: \"transition.expandIn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"w-128 mb-32\",\n      src: \"assets/images/logos/fuse.svg\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FuseAnimate, {\n      animation: \"transition.slideUpIn\",\n      delay: 300,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h3\",\n      color: \"inherit\",\n      className: \"font-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, \"Welcome to the FUSE!\")), /*#__PURE__*/React.createElement(FuseAnimate, {\n      delay: 400,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"subtitle1\",\n      color: \"inherit\",\n      className: \"max-w-512 mt-16\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }, \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ullamcorper nisl erat, vel convallis elit fermentum pellentesque. Sed mollis velit facilisis facilisis.\"))), /*#__PURE__*/React.createElement(FuseAnimate, {\n      animation: {\n        translateX: [0, '100%']\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"w-full max-w-400 mx-auto m-16 md:m-0\",\n      square: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      className: \"flex flex-col items-center justify-center p-32 md:p-48 md:pt-128 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      className: \"md:w-full mb-32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, \"LOGIN TO YOUR ACCOUNT\"), /*#__PURE__*/React.createElement(\"form\", {\n      name: \"loginForm\",\n      noValidate: true,\n      className: \"flex flex-col justify-center w-full\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      className: \"mb-16\",\n      label: \"Email\",\n      autoFocus: true,\n      type: \"email\",\n      name: \"email\",\n      value: email,\n      onChange: this.handleChange,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      className: \"mb-16\",\n      label: \"Password\",\n      type: \"password\",\n      name: \"password\",\n      value: password,\n      onChange: this.handleChange,\n      variant: \"outlined\",\n      required: true,\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex items-center justify-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      className: \"w-full mx-auto mt-16\",\n      \"aria-label\": \"LOG IN\",\n      disabled: !this.canBeSubmitted(),\n      onClick: this.login,\n      onKeyPress: this.login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 29\n      }\n    }, \"LOGIN\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: this.state.Isvisble == 1 ? \"my-24 flex items-center justify-center\" : \"my-24 flex items-center justify-center d-none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Divider, {\n      className: \"w-32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"mx-8 font-bold\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 33\n      }\n    }, \"Invalid Credentials\"), /*#__PURE__*/React.createElement(Divider, {\n      className: \"w-32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 33\n      }\n    }))))));\n  }\n\n} // export default connect(null, {setUser})(Login);\n// export default withStyles(styles, {withTheme: true}).connect(null,{setUser})(Login);\n\n\nexport default connect(null, {\n  setUser\n})(withStyles(styles, {\n  withTheme: true\n})(Login));","map":{"version":3,"sources":["E:/employee management system/hr/new theme/Fuse-React-v5.2.1-skeleton/src/app/main/Login/Login.js"],"names":["React","Component","withStyles","Button","Card","CardContent","Checkbox","Divider","FormControl","FormControlLabel","TextField","Typography","darken","FuseAnimate","classNames","Link","_","axios","Redirect","defaultUrl","connect","setUser","Messages","styles","theme","root","background","palette","primary","dark","color","contrastText","Login","constructor","props","state","email","password","Isvisble","redirect","localStorage","getItem","handleChange","event","setState","set","target","name","type","checked","value","parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","login","obj","Email","Password","interceptors","request","use","config","error","console","log","Promise","reject","method","url","headers","then","response","data","setItem","tokendata","role","Name","shortcuts","catch","finally","submit","bind","keyCode","canBeSubmitted","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","length","render","classes","remember","translateX","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { withStyles, Button, Card, CardContent, Checkbox, Divider, FormControl, FormControlLabel, TextField, Typography } from '@material-ui/core';\r\nimport { darken } from '@material-ui/core/styles/colorManipulator';\r\nimport { FuseAnimate } from '@fuse';\r\nimport classNames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport _ from '@lodash';\r\nimport axios from \"axios\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport defaultUrl from '../../../app/services/constant/constant';\r\nimport { connect } from 'react-redux'\r\nimport { setUser } from '../../../app/auth/store/actions/login.actions'\r\nimport Messages from '../toaster';\r\nconst styles = theme => ({\r\n    root: {\r\n        background: 'linear-gradient(to right, ' + theme.palette.primary.dark + ' 0%, ' + darken(theme.palette.primary.dark, 0.5) + ' 100%)',\r\n        color: theme.palette.primary.contrastText\r\n    }\r\n});\r\n\r\nclass Login extends Component {\r\n\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        Isvisble:0,\r\n        redirect: localStorage.getItem('IsLoggedIn')\r\n    };\r\n    constructor(props) {\r\n        super(props)\r\n        this.setUser = this.props;\r\n        this.submit = this.submit.bind(this);\r\n    }\r\n    submit(event) {\r\n        console.log(event.keyCode);\r\n        if (this.canBeSubmitted()) {\r\n            if (event.keyCode === 13)\r\n                this.login();\r\n        }\r\n    }\r\n\r\ncomponentDidMount(){\r\n    document.addEventListener(\"keydown\", this.submit, false);\r\n}\r\ncomponentWillUnmount(){\r\n    document.removeEventListener(\"keydown\", this.submit, false);\r\n}\r\n\r\nhandleChange = (event) => {\r\n    this.setState(_.set({ ...this.state }, event.target.name, event.target.type === 'checkbox' ? event.target.checked : event.target.value));\r\n};\r\n\r\ncanBeSubmitted()\r\n{\r\n    const { email, password } = this.state;\r\n    return (\r\n        email.length > 0 && password.length > 0\r\n    );\r\n}\r\nparseJwt = function (token) {\r\n    var base64Url = token.split('.')[1];\r\n    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n    }).join(''));\r\n\r\n    return JSON.parse(jsonPayload);\r\n};\r\nlogin = () => {\r\n    //  let history = useHistory();\r\n    var obj = {\r\n        Email: this.state.email,\r\n        Password: this.state.password,\r\n    };\r\n    axios.interceptors.request.use(function (config) {\r\n      \r\n        return config;\r\n    }, function (error) {\r\n        console.log('Error');\r\n        return Promise.reject(error);\r\n    });\r\n    axios({\r\n        method: \"get\",\r\n        url: defaultUrl + \"userLogin/\" + this.state.email + \"/\" + this.state.password,\r\n        // data: JSON.stringify(obj),\r\n        headers: {\r\n            // 'Authorization': `bearer ${token}`,\r\n            \"Content-Type\": \"application/json;charset=utf-8\",\r\n        },\r\n    })\r\n        .then((response) => {\r\n         \r\n            if(response.data!=\"Invalid Credentials\"){\r\n                  localStorage.setItem('IsLoggedIn', true);\r\n            localStorage.setItem('token', response.data);\r\n\r\n            var tokendata = this.parseJwt(response.data);\r\n            this.props.setUser({\r\n                role: 'admin', data: {\r\n                    'displayName': tokendata.Name,\r\n                    'photoURL': 'assets/images/avatars/Velazquez.jpg',\r\n                    'email': tokendata.Name + \"@gmail.com\",\r\n                    shortcuts: [\r\n                        'calendar',\r\n                        'mail',\r\n                        'contacts',\r\n                        'todo'\r\n                    ]\r\n                }\r\n            });\r\n           \r\n            this.setState({\r\n                redirect: true\r\n            });  \r\n            }else{\r\n              this.setState({Isvisble:1});\r\n            }\r\n        \r\n           \r\n        })\r\n        .catch((error) => {\r\n            console.log(\"error\")\r\n            Messages.error(error.data);\r\n            this.setState({\r\n                email: \"\",\r\n                password: ''\r\n            })\r\n       \r\n        }).finally(() => {\r\n        });\r\n}\r\n\r\nrender()\r\n{\r\n    const { redirect } = this.state;\r\n\r\n    if (redirect) {\r\n        return <Redirect to='/dashboard' />;\r\n    }\r\n    const { classes } = this.props;\r\n    const { email, password, remember } = this.state;\r\n\r\n    return (\r\n        <div className={classNames(classes.root, \"flex flex-col flex-auto flex-no-shrink p-24 md:flex-row md:p-0\")}>\r\n\r\n            <div className=\"flex flex-col flex-no-grow items-center text-white p-16 text-center md:p-128 md:items-start md:flex-no-shrink md:flex-1 md:text-left\">\r\n\r\n                <FuseAnimate animation=\"transition.expandIn\">\r\n                    <img className=\"w-128 mb-32\" src=\"assets/images/logos/fuse.svg\" alt=\"logo\" />\r\n                </FuseAnimate>\r\n\r\n                <FuseAnimate animation=\"transition.slideUpIn\" delay={300}>\r\n                    <Typography variant=\"h3\" color=\"inherit\" className=\"font-light\">\r\n                        Welcome to the FUSE!\r\n                        </Typography>\r\n                </FuseAnimate>\r\n\r\n                <FuseAnimate delay={400}>\r\n                    <Typography variant=\"subtitle1\" color=\"inherit\" className=\"max-w-512 mt-16\">\r\n                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ullamcorper nisl erat, vel convallis elit fermentum pellentesque. Sed mollis velit\r\n                        facilisis facilisis.\r\n                        </Typography>\r\n                </FuseAnimate>\r\n            </div>\r\n\r\n            <FuseAnimate animation={{ translateX: [0, '100%'] }}>\r\n\r\n                <Card className=\"w-full max-w-400 mx-auto m-16 md:m-0\" square>\r\n\r\n                    <CardContent className=\"flex flex-col items-center justify-center p-32 md:p-48 md:pt-128 \">\r\n\r\n                        <Typography variant=\"h6\" className=\"md:w-full mb-32\">LOGIN TO YOUR ACCOUNT</Typography>\r\n\r\n                        <form name=\"loginForm\" noValidate className=\"flex flex-col justify-center w-full\">\r\n\r\n                            <TextField\r\n                                className=\"mb-16\"\r\n                                label=\"Email\"\r\n                                autoFocus\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                value={email}\r\n                                onChange={this.handleChange}\r\n                                variant=\"outlined\"\r\n                                required\r\n                                fullWidth\r\n\r\n                            />\r\n\r\n                            <TextField\r\n                                className=\"mb-16\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                value={password}\r\n                                onChange={this.handleChange}\r\n                                variant=\"outlined\"\r\n                                required\r\n                                fullWidth\r\n                            />\r\n\r\n                            <div className=\"flex items-center justify-between\">\r\n\r\n                                {/* <FormControl>\r\n                                        <FormControlLabel\r\n                                            control={\r\n                                                <Checkbox\r\n                                                    name=\"remember\"\r\n                                                    checked={remember}\r\n                                                    onChange={this.handleChange}/>\r\n                                            }\r\n                                            label=\"Remember Me\"\r\n                                        />\r\n                                    </FormControl> */}\r\n                                {/* \r\n                                    <Link className=\"font-medium\" to=\"/pages/auth/forgot-password-2\">\r\n                                        Forgot Password?\r\n                                    </Link> */}\r\n                            </div>\r\n\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                className=\"w-full mx-auto mt-16\"\r\n                                aria-label=\"LOG IN\"\r\n                                disabled={!this.canBeSubmitted()}\r\n                                onClick={this.login}\r\n                                onKeyPress={this.login}\r\n                            >\r\n                                LOGIN\r\n                                </Button>\r\n\r\n                        </form>\r\n\r\n                        <div className={this.state.Isvisble==1?\"my-24 flex items-center justify-center\":\"my-24 flex items-center justify-center d-none\"} >\r\n                                <Divider className=\"w-32\"/>\r\n                                <span className=\"mx-8 font-bold\" style={{color:\"red\"}} >Invalid Credentials</span>\r\n                                <Divider className=\"w-32\"/>\r\n                            </div>\r\n                        {/* \r\n                            <Button variant=\"contained\" color=\"secondary\" size=\"small\"\r\n                                    className=\"normal-case w-192 mb-8\">\r\n                                Log in with Google\r\n                            </Button>\r\n\r\n                            <Button variant=\"contained\" color=\"primary\" size=\"small\"\r\n                                    className=\"normal-case w-192\">\r\n                                Log in with Facebook\r\n                            </Button>\r\n\r\n                            <div className=\"flex flex-col items-center justify-center pt-32 pb-24\">\r\n                                <span className=\"font-medium\">Don't have an account?</span>\r\n                                <Link className=\"font-medium\" to=\"/pages/auth/register-2\">Create an account</Link>\r\n                            </div> */}\r\n\r\n                    </CardContent>\r\n                </Card>\r\n            </FuseAnimate>\r\n        </div>\r\n    );\r\n}\r\n}\r\n// export default connect(null, {setUser})(Login);\r\n// export default withStyles(styles, {withTheme: true}).connect(null,{setUser})(Login);\r\n\r\nexport default connect(null, { setUser })(withStyles(styles, { withTheme: true })(Login));\r\n"]},"metadata":{},"sourceType":"module"}