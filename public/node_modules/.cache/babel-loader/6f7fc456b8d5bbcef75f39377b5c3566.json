{"ast":null,"code":"/**\n * auth0-js v9.14.0\n * Author: Auth0\n * Date: 2020-09-11\n * License: MIT\n */\n!function (global, factory) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(factory) : (global = global || self).CordovaAuth0Plugin = factory();\n}(this, function () {\n  \"use strict\";\n\n  var version_raw = \"9.14.0\",\n      toString = Object.prototype.toString;\n\n  function attribute(o, attr, type, text) {\n    if (type = \"array\" === type ? \"object\" : type, o && typeof o[attr] !== type) throw new Error(text);\n  }\n\n  function variable(o, type, text) {\n    if (typeof o !== type) throw new Error(text);\n  }\n\n  function value(o, values, text) {\n    if (-1 === values.indexOf(o)) throw new Error(text);\n  }\n\n  var assert = {\n    check: function (o, config, attributes) {\n      if (config.optional && !o || variable(o, config.type, config.message), \"object\" === config.type && attributes) for (var keys = Object.keys(attributes), index = 0; index < keys.length; index++) {\n        var a = keys[index];\n        attributes[a].optional && !o[a] || attributes[a].condition && !attributes[a].condition(o) || (attribute(o, a, attributes[a].type, attributes[a].message), attributes[a].values && value(o[a], attributes[a].values, attributes[a].value_message));\n      }\n    },\n    attribute: attribute,\n    variable: variable,\n    value: value,\n    isArray: function (array) {\n      return this.supportsIsArray() ? Array.isArray(array) : \"[object Array]\" === toString.call(array);\n    },\n    supportsIsArray: function () {\n      return null != Array.isArray;\n    }\n  };\n\n  function objectAssignPolyfill(target) {\n    if (null == target) throw new TypeError(\"Cannot convert first argument to object\");\n\n    for (var to = Object(target), i = 1; i < arguments.length; i++) {\n      var nextSource = arguments[i];\n      if (null != nextSource) for (var keysArray = Object.keys(Object(nextSource)), nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n        var nextKey = keysArray[nextIndex],\n            desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n        void 0 !== desc && desc.enumerable && (to[nextKey] = nextSource[nextKey]);\n      }\n    }\n\n    return to;\n  }\n\n  var objectAssign = {\n    get: function () {\n      return Object.assign ? Object.assign : objectAssignPolyfill;\n    },\n    objectAssignPolyfill: objectAssignPolyfill\n  };\n\n  function pick(object, keys) {\n    return keys.reduce(function (prev, key) {\n      return object[key] && (prev[key] = object[key]), prev;\n    }, {});\n  }\n\n  function objectValues(obj) {\n    var values = [];\n\n    for (var key in obj) values.push(obj[key]);\n\n    return values;\n  }\n\n  function extend() {\n    var params = objectValues(arguments);\n    return params.unshift({}), objectAssign.get().apply(void 0, params);\n  }\n\n  function getLocationFromUrl(href) {\n    var match = href.match(/^(https?:|file:|chrome-extension:)\\/\\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/);\n    return match && {\n      href: href,\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    };\n  }\n\n  function trim(options, key) {\n    var trimmed = extend(options);\n    return options[key] && (trimmed[key] = options[key].trim()), trimmed;\n  }\n\n  var objectHelper = {\n    toSnakeCase: function toSnakeCase(object, exceptions) {\n      return \"object\" != typeof object || assert.isArray(object) || null === object ? object : (exceptions = exceptions || [], Object.keys(object).reduce(function (p, key) {\n        return p[-1 === exceptions.indexOf(key) ? function (str) {\n          for (var code, newKey = \"\", index = 0, wasPrevNumber = !0, wasPrevUppercase = !0; index < str.length;) code = str.charCodeAt(index), !wasPrevUppercase && code >= 65 && code <= 90 || !wasPrevNumber && code >= 48 && code <= 57 ? (newKey += \"_\", newKey += str[index].toLowerCase()) : newKey += str[index].toLowerCase(), wasPrevNumber = code >= 48 && code <= 57, wasPrevUppercase = code >= 65 && code <= 90, index++;\n\n          return newKey;\n        }(key) : key] = toSnakeCase(object[key]), p;\n      }, {}));\n    },\n    toCamelCase: function toCamelCase(object, exceptions, options) {\n      return \"object\" != typeof object || assert.isArray(object) || null === object ? object : (exceptions = exceptions || [], options = options || {}, Object.keys(object).reduce(function (p, key) {\n        var parts,\n            newKey = -1 === exceptions.indexOf(key) ? (parts = key.split(\"_\")).reduce(function (p, c) {\n          return p + c.charAt(0).toUpperCase() + c.slice(1);\n        }, parts.shift()) : key;\n        return p[newKey] = toCamelCase(object[newKey] || object[key], [], options), options.keepOriginal && (p[key] = toCamelCase(object[key], [], options)), p;\n      }, {}));\n    },\n    blacklist: function (object, blacklistedKeys) {\n      return Object.keys(object).reduce(function (p, key) {\n        return -1 === blacklistedKeys.indexOf(key) && (p[key] = object[key]), p;\n      }, {});\n    },\n    merge: function (object, keys) {\n      return {\n        base: keys ? pick(object, keys) : object,\n        with: function (object2, keys2) {\n          return object2 = keys2 ? pick(object2, keys2) : object2, extend(this.base, object2);\n        }\n      };\n    },\n    pick: pick,\n    getKeysNotIn: function (obj, allowedKeys) {\n      var notAllowed = [];\n\n      for (var key in obj) -1 === allowedKeys.indexOf(key) && notAllowed.push(key);\n\n      return notAllowed;\n    },\n    extend: extend,\n    getOriginFromUrl: function (url) {\n      if (url) {\n        var parsed = getLocationFromUrl(url);\n        if (!parsed) return null;\n        var origin = parsed.protocol + \"//\" + parsed.hostname;\n        return parsed.port && (origin += \":\" + parsed.port), origin;\n      }\n    },\n    getLocationFromUrl: getLocationFromUrl,\n    trimUserDetails: function (options) {\n      return function (options, keys) {\n        return keys.reduce(trim, options);\n      }(options, [\"username\", \"email\", \"phoneNumber\"]);\n    },\n    updatePropertyOn: function updatePropertyOn(obj, path, value) {\n      \"string\" == typeof path && (path = path.split(\".\"));\n      var next = path[0];\n      obj.hasOwnProperty(next) && (1 === path.length ? obj[next] = value : updatePropertyOn(obj[next], path.slice(1), value));\n    }\n  };\n\n  function getWindow() {\n    return window;\n  }\n\n  var windowHandler = {\n    redirect: function (url) {\n      getWindow().location = url;\n    },\n    getDocument: function () {\n      return getWindow().document;\n    },\n    getWindow: getWindow,\n    getOrigin: function () {\n      var location = getWindow().location,\n          origin = location.origin;\n      return origin || (origin = objectHelper.getOriginFromUrl(location.href)), origin;\n    }\n  },\n      commonjsGlobal = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n\n  var urlJoin = function (fn, module) {\n    return fn(module = {\n      exports: {}\n    }, module.exports), module.exports;\n  }(function (module) {\n    var context, definition;\n    context = commonjsGlobal, definition = function () {\n      function normalize(strArray) {\n        var resultArray = [];\n        if (0 === strArray.length) return \"\";\n        if (\"string\" != typeof strArray[0]) throw new TypeError(\"Url must be a string. Received \" + strArray[0]);\n\n        if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n          var first = strArray.shift();\n          strArray[0] = first + strArray[0];\n        }\n\n        strArray[0].match(/^file:\\/\\/\\//) ? strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, \"$1:///\") : strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, \"$1://\");\n\n        for (var i = 0; i < strArray.length; i++) {\n          var component = strArray[i];\n          if (\"string\" != typeof component) throw new TypeError(\"Url must be a string. Received \" + component);\n          \"\" !== component && (i > 0 && (component = component.replace(/^[\\/]+/, \"\")), component = i < strArray.length - 1 ? component.replace(/[\\/]+$/, \"\") : component.replace(/[\\/]+$/, \"/\"), resultArray.push(component));\n        }\n\n        var str = resultArray.join(\"/\"),\n            parts = (str = str.replace(/\\/(\\?|&|#[^!])/g, \"$1\")).split(\"?\");\n        return str = parts.shift() + (parts.length > 0 ? \"?\" : \"\") + parts.join(\"&\");\n      }\n\n      return function () {\n        return normalize(\"object\" == typeof arguments[0] ? arguments[0] : [].slice.call(arguments));\n      };\n    }, module.exports ? module.exports = definition() : context.urljoin = definition();\n  }),\n      has = Object.prototype.hasOwnProperty,\n      isArray$1 = Array.isArray,\n      hexTable = function () {\n    for (var array = [], i = 0; i < 256; ++i) array.push(\"%\" + ((i < 16 ? \"0\" : \"\") + i.toString(16)).toUpperCase());\n\n    return array;\n  }(),\n      arrayToObject = function (source, options) {\n    for (var obj = options && options.plainObjects ? Object.create(null) : {}, i = 0; i < source.length; ++i) void 0 !== source[i] && (obj[i] = source[i]);\n\n    return obj;\n  },\n      utils = {\n    arrayToObject: arrayToObject,\n    assign: function (target, source) {\n      return Object.keys(source).reduce(function (acc, key) {\n        return acc[key] = source[key], acc;\n      }, target);\n    },\n    combine: function (a, b) {\n      return [].concat(a, b);\n    },\n    compact: function (value) {\n      for (var queue = [{\n        obj: {\n          o: value\n        },\n        prop: \"o\"\n      }], refs = [], i = 0; i < queue.length; ++i) for (var item = queue[i], obj = item.obj[item.prop], keys = Object.keys(obj), j = 0; j < keys.length; ++j) {\n        var key = keys[j],\n            val = obj[key];\n        \"object\" == typeof val && null !== val && -1 === refs.indexOf(val) && (queue.push({\n          obj: obj,\n          prop: key\n        }), refs.push(val));\n      }\n\n      return function (queue) {\n        for (; queue.length > 1;) {\n          var item = queue.pop(),\n              obj = item.obj[item.prop];\n\n          if (isArray$1(obj)) {\n            for (var compacted = [], j = 0; j < obj.length; ++j) void 0 !== obj[j] && compacted.push(obj[j]);\n\n            item.obj[item.prop] = compacted;\n          }\n        }\n      }(queue), value;\n    },\n    decode: function (str, decoder, charset) {\n      var strWithoutPlus = str.replace(/\\+/g, \" \");\n      if (\"iso-8859-1\" === charset) return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n\n      try {\n        return decodeURIComponent(strWithoutPlus);\n      } catch (e) {\n        return strWithoutPlus;\n      }\n    },\n    encode: function (str, defaultEncoder, charset) {\n      if (0 === str.length) return str;\n      var string = str;\n      if (\"symbol\" == typeof str ? string = Symbol.prototype.toString.call(str) : \"string\" != typeof str && (string = String(str)), \"iso-8859-1\" === charset) return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n        return \"%26%23\" + parseInt($0.slice(2), 16) + \"%3B\";\n      });\n\n      for (var out = \"\", i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n        45 === c || 46 === c || 95 === c || 126 === c || c >= 48 && c <= 57 || c >= 65 && c <= 90 || c >= 97 && c <= 122 ? out += string.charAt(i) : c < 128 ? out += hexTable[c] : c < 2048 ? out += hexTable[192 | c >> 6] + hexTable[128 | 63 & c] : c < 55296 || c >= 57344 ? out += hexTable[224 | c >> 12] + hexTable[128 | c >> 6 & 63] + hexTable[128 | 63 & c] : (i += 1, c = 65536 + ((1023 & c) << 10 | 1023 & string.charCodeAt(i)), out += hexTable[240 | c >> 18] + hexTable[128 | c >> 12 & 63] + hexTable[128 | c >> 6 & 63] + hexTable[128 | 63 & c]);\n      }\n\n      return out;\n    },\n    isBuffer: function (obj) {\n      return !(!obj || \"object\" != typeof obj) && !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n    },\n    isRegExp: function (obj) {\n      return \"[object RegExp]\" === Object.prototype.toString.call(obj);\n    },\n    maybeMap: function (val, fn) {\n      if (isArray$1(val)) {\n        for (var mapped = [], i = 0; i < val.length; i += 1) mapped.push(fn(val[i]));\n\n        return mapped;\n      }\n\n      return fn(val);\n    },\n    merge: function merge(target, source, options) {\n      if (!source) return target;\n\n      if (\"object\" != typeof source) {\n        if (isArray$1(target)) target.push(source);else {\n          if (!target || \"object\" != typeof target) return [target, source];\n          (options && (options.plainObjects || options.allowPrototypes) || !has.call(Object.prototype, source)) && (target[source] = !0);\n        }\n        return target;\n      }\n\n      if (!target || \"object\" != typeof target) return [target].concat(source);\n      var mergeTarget = target;\n      return isArray$1(target) && !isArray$1(source) && (mergeTarget = arrayToObject(target, options)), isArray$1(target) && isArray$1(source) ? (source.forEach(function (item, i) {\n        if (has.call(target, i)) {\n          var targetItem = target[i];\n          targetItem && \"object\" == typeof targetItem && item && \"object\" == typeof item ? target[i] = merge(targetItem, item, options) : target.push(item);\n        } else target[i] = item;\n      }), target) : Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n        return has.call(acc, key) ? acc[key] = merge(acc[key], value, options) : acc[key] = value, acc;\n      }, mergeTarget);\n    }\n  },\n      replace = String.prototype.replace,\n      percentTwenties = /%20/g,\n      Format = {\n    RFC1738: \"RFC1738\",\n    RFC3986: \"RFC3986\"\n  },\n      formats = utils.assign({\n    default: Format.RFC3986,\n    formatters: {\n      RFC1738: function (value) {\n        return replace.call(value, percentTwenties, \"+\");\n      },\n      RFC3986: function (value) {\n        return String(value);\n      }\n    }\n  }, Format),\n      has$1 = Object.prototype.hasOwnProperty,\n      arrayPrefixGenerators = {\n    brackets: function (prefix) {\n      return prefix + \"[]\";\n    },\n    comma: \"comma\",\n    indices: function (prefix, key) {\n      return prefix + \"[\" + key + \"]\";\n    },\n    repeat: function (prefix) {\n      return prefix;\n    }\n  },\n      isArray$2 = Array.isArray,\n      push = Array.prototype.push,\n      pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray$2(valueOrArray) ? valueOrArray : [valueOrArray]);\n  },\n      toISO = Date.prototype.toISOString,\n      defaultFormat = formats.default,\n      defaults = {\n    addQueryPrefix: !1,\n    allowDots: !1,\n    charset: \"utf-8\",\n    charsetSentinel: !1,\n    delimiter: \"&\",\n    encode: !0,\n    encoder: utils.encode,\n    encodeValuesOnly: !1,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    indices: !1,\n    serializeDate: function (date) {\n      return toISO.call(date);\n    },\n    skipNulls: !1,\n    strictNullHandling: !1\n  },\n      stringify = function stringify(object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset) {\n    var v,\n        obj = object;\n\n    if (\"function\" == typeof filter ? obj = filter(prefix, obj) : obj instanceof Date ? obj = serializeDate(obj) : \"comma\" === generateArrayPrefix && isArray$2(obj) && (obj = utils.maybeMap(obj, function (value) {\n      return value instanceof Date ? serializeDate(value) : value;\n    }).join(\",\")), null === obj) {\n      if (strictNullHandling) return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, \"key\") : prefix;\n      obj = \"\";\n    }\n\n    if (\"string\" == typeof (v = obj) || \"number\" == typeof v || \"boolean\" == typeof v || \"symbol\" == typeof v || \"bigint\" == typeof v || utils.isBuffer(obj)) return encoder ? [formatter(encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, \"key\")) + \"=\" + formatter(encoder(obj, defaults.encoder, charset, \"value\"))] : [formatter(prefix) + \"=\" + formatter(String(obj))];\n    var objKeys,\n        values = [];\n    if (void 0 === obj) return values;\n    if (isArray$2(filter)) objKeys = filter;else {\n      var keys = Object.keys(obj);\n      objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n      var key = objKeys[i],\n          value = obj[key];\n\n      if (!skipNulls || null !== value) {\n        var keyPrefix = isArray$2(obj) ? \"function\" == typeof generateArrayPrefix ? generateArrayPrefix(prefix, key) : prefix : prefix + (allowDots ? \".\" + key : \"[\" + key + \"]\");\n        pushToArray(values, stringify(value, keyPrefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset));\n      }\n    }\n\n    return values;\n  },\n      lib_stringify = (Object.prototype.hasOwnProperty, Array.isArray, function (object, opts) {\n    var objKeys,\n        obj = object,\n        options = function (opts) {\n      if (!opts) return defaults;\n      if (null !== opts.encoder && void 0 !== opts.encoder && \"function\" != typeof opts.encoder) throw new TypeError(\"Encoder has to be a function.\");\n      var charset = opts.charset || defaults.charset;\n      if (void 0 !== opts.charset && \"utf-8\" !== opts.charset && \"iso-8859-1\" !== opts.charset) throw new TypeError(\"The charset option must be either utf-8, iso-8859-1, or undefined\");\n      var format = formats.default;\n\n      if (void 0 !== opts.format) {\n        if (!has$1.call(formats.formatters, opts.format)) throw new TypeError(\"Unknown format option provided.\");\n        format = opts.format;\n      }\n\n      var formatter = formats.formatters[format],\n          filter = defaults.filter;\n      return (\"function\" == typeof opts.filter || isArray$2(opts.filter)) && (filter = opts.filter), {\n        addQueryPrefix: \"boolean\" == typeof opts.addQueryPrefix ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: void 0 === opts.allowDots ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: \"boolean\" == typeof opts.charsetSentinel ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: void 0 === opts.delimiter ? defaults.delimiter : opts.delimiter,\n        encode: \"boolean\" == typeof opts.encode ? opts.encode : defaults.encode,\n        encoder: \"function\" == typeof opts.encoder ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: \"boolean\" == typeof opts.encodeValuesOnly ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: \"function\" == typeof opts.serializeDate ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: \"boolean\" == typeof opts.skipNulls ? opts.skipNulls : defaults.skipNulls,\n        sort: \"function\" == typeof opts.sort ? opts.sort : null,\n        strictNullHandling: \"boolean\" == typeof opts.strictNullHandling ? opts.strictNullHandling : defaults.strictNullHandling\n      };\n    }(opts);\n\n    \"function\" == typeof options.filter ? obj = (0, options.filter)(\"\", obj) : isArray$2(options.filter) && (objKeys = options.filter);\n    var arrayFormat,\n        keys = [];\n    if (\"object\" != typeof obj || null === obj) return \"\";\n    arrayFormat = opts && opts.arrayFormat in arrayPrefixGenerators ? opts.arrayFormat : opts && \"indices\" in opts ? opts.indices ? \"indices\" : \"repeat\" : \"indices\";\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n    objKeys || (objKeys = Object.keys(obj)), options.sort && objKeys.sort(options.sort);\n\n    for (var i = 0; i < objKeys.length; ++i) {\n      var key = objKeys[i];\n      options.skipNulls && null === obj[key] || pushToArray(keys, stringify(obj[key], key, generateArrayPrefix, options.strictNullHandling, options.skipNulls, options.encode ? options.encoder : null, options.filter, options.sort, options.allowDots, options.serializeDate, options.formatter, options.encodeValuesOnly, options.charset));\n    }\n\n    var joined = keys.join(options.delimiter),\n        prefix = !0 === options.addQueryPrefix ? \"?\" : \"\";\n    return options.charsetSentinel && (\"iso-8859-1\" === options.charset ? prefix += \"utf8=%26%2310003%3B&\" : prefix += \"utf8=%E2%9C%93&\"), joined.length > 0 ? prefix + joined : \"\";\n  });\n\n  function PopupHandler(webAuth) {\n    this.webAuth = webAuth, this._current_popup = null, this.options = null;\n  }\n\n  function PluginHandler(webAuth) {\n    this.webAuth = webAuth;\n  }\n\n  function CordovaPlugin() {\n    this.webAuth = null, this.version = version_raw, this.extensibilityPoints = [\"popup.authorize\", \"popup.getPopupHandler\"];\n  }\n\n  return PopupHandler.prototype.preload = function (options) {\n    var _this = this,\n        _window = windowHandler.getWindow(),\n        url = options.url || \"about:blank\",\n        popupOptions = options.popupOptions || {};\n\n    popupOptions.location = \"yes\", delete popupOptions.width, delete popupOptions.height;\n    var windowFeatures = lib_stringify(popupOptions, {\n      encode: !1,\n      delimiter: \",\"\n    });\n    return this._current_popup && !this._current_popup.closed || (this._current_popup = _window.open(url, \"_blank\", windowFeatures), this._current_popup.kill = function (success) {\n      _this._current_popup.success = success, this.close(), _this._current_popup = null;\n    }), this._current_popup;\n  }, PopupHandler.prototype.load = function (url, _, options, cb) {\n    var _this = this;\n\n    this.url = url, this.options = options, this._current_popup ? this._current_popup.location.href = url : (options.url = url, this.preload(options)), this.transientErrorHandler = function (event) {\n      _this.errorHandler(event, cb);\n    }, this.transientStartHandler = function (event) {\n      _this.startHandler(event, cb);\n    }, this.transientExitHandler = function () {\n      _this.exitHandler(cb);\n    }, this._current_popup.addEventListener(\"loaderror\", this.transientErrorHandler), this._current_popup.addEventListener(\"loadstart\", this.transientStartHandler), this._current_popup.addEventListener(\"exit\", this.transientExitHandler);\n  }, PopupHandler.prototype.errorHandler = function (event, cb) {\n    this._current_popup && (this._current_popup.kill(!0), cb({\n      error: \"window_error\",\n      errorDescription: event.message\n    }));\n  }, PopupHandler.prototype.unhook = function () {\n    this._current_popup.removeEventListener(\"loaderror\", this.transientErrorHandler), this._current_popup.removeEventListener(\"loadstart\", this.transientStartHandler), this._current_popup.removeEventListener(\"exit\", this.transientExitHandler);\n  }, PopupHandler.prototype.exitHandler = function (cb) {\n    this._current_popup && (this.unhook(), this._current_popup.success || cb({\n      error: \"window_closed\",\n      errorDescription: \"Browser window closed\"\n    }));\n  }, PopupHandler.prototype.startHandler = function (event, cb) {\n    var _this = this;\n\n    if (this._current_popup) {\n      var callbackUrl = urlJoin(\"https:\", this.webAuth.baseOptions.domain, \"/mobile\");\n\n      if (!event.url || 0 === event.url.indexOf(callbackUrl + \"#\")) {\n        var parts = event.url.split(\"#\");\n\n        if (1 !== parts.length) {\n          var opts = {\n            hash: parts.pop()\n          };\n          this.options.nonce && (opts.nonce = this.options.nonce), this.webAuth.parseHash(opts, function (error, result) {\n            (error || result) && (_this._current_popup.kill(!0), cb(error, result));\n          });\n        }\n      }\n    }\n  }, PluginHandler.prototype.processParams = function (params) {\n    return params.redirectUri = urlJoin(\"https://\" + params.domain, \"mobile\"), delete params.owp, params;\n  }, PluginHandler.prototype.getPopupHandler = function () {\n    return new PopupHandler(this.webAuth);\n  }, CordovaPlugin.prototype.setWebAuth = function (webAuth) {\n    this.webAuth = webAuth;\n  }, CordovaPlugin.prototype.supports = function (extensibilityPoint) {\n    var _window = windowHandler.getWindow();\n\n    return (!!_window.cordova || !!_window.electron) && this.extensibilityPoints.indexOf(extensibilityPoint) > -1;\n  }, CordovaPlugin.prototype.init = function () {\n    return new PluginHandler(this.webAuth);\n  }, CordovaPlugin;\n});","map":{"version":3,"sources":["../src/version.js","../src/helper/assert.js","../src/helper/object-assign.js","../src/helper/object.js","../src/helper/window.js","../node_modules/url-join/lib/url-join.js","../node_modules/qs/lib/utils.js","../node_modules/qs/lib/formats.js","../node_modules/qs/lib/stringify.js","../node_modules/qs/lib/parse.js","../plugins/cordova/popup-handler.js","../plugins/cordova/plugin-handler.js","../plugins/cordova/index.js"],"names":["toString","Object","prototype","attribute","o","attr","type","text","Error","variable","value","values","indexOf","config","attributes","optional","message","keys","index","length","a","condition","value_message","array","this","supportsIsArray","Array","isArray","call","check","assign","objectAssignPolyfill","target","TypeError","to","i","arguments","nextSource","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","enumerable","get","pick","object","reduce","prev","key","obj","allowedKeys","notAllowed","push","objectValues","extend","params","unshift","objectAssign","apply","base","with","object2","keys2","blacklistedKeys","p","str","newKey","code","wasPrevNumber","wasPrevUppercase","charCodeAt","toLowerCase","parts","split","c","charAt","toUpperCase","slice","shift","toSnakeCase","exceptions","assert","camelToSnake","toCamelCase","options","keepOriginal","getLocationFromUrl","href","match","protocol","host","hostname","port","pathname","search","hash","url","parsed","origin","trim","trimmed","trimMultiple","updatePropertyOn","path","next","hasOwnProperty","blacklist","merge","getKeysNotIn","getOriginFromUrl","trimUserDetails","getWindow","location","document","window","objectHelper","redirect","getDocument","getOrigin","context","definition","module","exports","normalize","strArray","resultArray","first","replace","component","join","has","hexTable","queue","item","pop","prop","compacted","j","arrayToObject","source","plainObjects","create","allowPrototypes","concat","mergeTarget","forEach","targetItem","acc","decoder","charset","strWithoutPlus","unescape","decodeURIComponent","e","defaultEncoder","string","Symbol","String","escape","$0","parseInt","out","refs","val","compactQueue","constructor","isBuffer","b","fn","mapped","combine","compact","decode","encode","isRegExp","maybeMap","percentTwenties","Format","RFC1738","RFC3986","util","default","formatters","arrayPrefixGenerators","brackets","prefix","comma","indices","repeat","pushToArray","arr","valueOrArray","toISO","Date","toISOString","defaultFormat","formats","defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","utils","encodeValuesOnly","format","formatter","serializeDate","date","skipNulls","strictNullHandling","v","stringify","generateArrayPrefix","filter","sort","objKeys","keyPrefix","opts","normalizeStringifyOptions","arrayFormat","joined","PopupHandler","webAuth","_current_popup","preload","_this","_window","windowHandler","popupOptions","width","height","windowFeatures","qs","closed","open","kill","success","close","load","_","cb","transientErrorHandler","event","errorHandler","transientStartHandler","startHandler","transientExitHandler","exitHandler","addEventListener","error","errorDescription","unhook","removeEventListener","callbackUrl","urljoin","baseOptions","domain","nonce","parseHash","result","PluginHandler","processParams","redirectUri","owp","getPopupHandler","CordovaPlugin","version","extensibilityPoints","setWebAuth","supports","extensibilityPoint","cordova","electron","init"],"mappings":";;;;;;;;;;;AAAA,MAAA,WAAA,GAAwB,QAAxB;AAAA,MCAIA,QAAAA,GAAWC,MAAAA,CAAOC,SAAPD,CAAiBD,QDAhC;;ACEA,WAASG,SAAT,CAAmBC,CAAnB,EAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCC,IAAlC,EAAkCA;AAEhC,QADAD,IAAAA,GAAgB,YAATA,IAAS,GAAU,QAAV,GAAqBA,IAArCA,EACIF,CAAAA,IAAAA,OAAYA,CAAAA,CAAEC,IAAFD,CAAZA,KAAwBE,IAA5B,EACE,MAAM,IAAIE,KAAJ,CAAUD,IAAV,CAAN;AAIJ;;AAAA,WAASE,QAAT,CAAkBL,CAAlB,EAAqBE,IAArB,EAA2BC,IAA3B,EAA2BA;AACzB,QAAA,OAAWH,CAAX,KAAiBE,IAAjB,EACE,MAAM,IAAIE,KAAJ,CAAUD,IAAV,CAAN;AAIJ;;AAAA,WAASG,KAAT,CAAeN,CAAf,EAAkBO,MAAlB,EAA0BJ,IAA1B,EAA0BA;AACxB,QAAA,CAA2B,CAA3B,KAAII,MAAAA,CAAOC,OAAPD,CAAeP,CAAfO,CAAJ,EACE,MAAM,IAAIH,KAAJ,CAAUD,IAAV,CAAN;AAAgBA;;AAAAA,MAAAA,MAAAA,GA4CL;AACbsB,IAAAA,KAAAA,EAzCF,UAAezB,CAAf,EAAkBS,MAAlB,EAA0BC,UAA1B,EAA0BA;AAIxB,UAHKD,MAAAA,CAAOE,QAAPF,IAAOE,CAAYX,CAAnBS,IACHJ,QAAAA,CAASL,CAATK,EAAYI,MAAAA,CAAOP,IAAnBG,EAAyBI,MAAAA,CAAOG,OAAhCP,CADGI,EAGe,aAAhBA,MAAAA,CAAOP,IAAS,IAAYQ,UAAhC,EAGE,KAFA,IAAIG,IAAAA,GAAOhB,MAAAA,CAAOgB,IAAPhB,CAAYa,UAAZb,CAAX,EAESiB,KAAAA,GAAQ,CAAjB,EAAoBA,KAAAA,GAAQD,IAAAA,CAAKE,MAAjC,EAAyCD,KAAAA,EAAzC,EAAkD;AAChD,YAAIE,CAAAA,GAAIH,IAAAA,CAAKC,KAALD,CAAR;AACKH,QAAAA,UAAAA,CAAWM,CAAXN,CAAAA,CAAcC,QAAdD,IAAcC,CAAYX,CAAAA,CAAEgB,CAAFhB,CAA1BU,IACEA,UAAAA,CAAWM,CAAXN,CAAAA,CAAcO,SAAdP,IAAcO,CAAaP,UAAAA,CAAWM,CAAXN,CAAAA,CAAcO,SAAdP,CAAwBV,CAAxBU,CAD7BA,KAEDX,SAAAA,CAAUC,CAAVD,EAAaiB,CAAbjB,EAAgBW,UAAAA,CAAWM,CAAXN,CAAAA,CAAcR,IAA9BH,EAAoCW,UAAAA,CAAWM,CAAXN,CAAAA,CAAcE,OAAlDb,CAAAA,EACIW,UAAAA,CAAWM,CAAXN,CAAAA,CAAcH,MAAdG,IACFJ,KAAAA,CAAMN,CAAAA,CAAEgB,CAAFhB,CAANM,EAAYI,UAAAA,CAAWM,CAAXN,CAAAA,CAAcH,MAA1BD,EAAkCI,UAAAA,CAAWM,CAAXN,CAAAA,CAAcQ,aAAhDZ,CAJDI;AAIiDQ;AAAAA,KA2B7C;AAEbnB,IAAAA,SAAAA,EAAWA,SAFE;AAGbM,IAAAA,QAAAA,EAAUA,QAHG;AAIbC,IAAAA,KAAAA,EAAOA,KAJM;AAKbiB,IAAAA,OAAAA,EAjBF,UAAiBJ,KAAjB,EAAiBA;AACf,aAAIC,KAAKC,eAALD,KACKE,KAAAA,CAAMC,OAAND,CAAcH,KAAdG,CADLF,GAI4B,qBAAzBxB,QAAAA,CAAS4B,IAAT5B,CAAcuB,KAAdvB,CAJP;AAIqBuB,KAOR;AAMbE,IAAAA,eAAAA,EAVF,YAAA;AACE,aAAwB,QAAjBC,KAAAA,CAAMC,OAAb;AAAaA;AAGA,GA5CKpB;;ACPpB,WAASwB,oBAAT,CAA8BC,MAA9B,EAA8BA;AAC5B,QAAIA,QAAAA,MAAJ,EACE,MAAM,IAAIC,SAAJ,CAAc,yCAAd,CAAN;;AAIF,SADA,IAAIC,EAAAA,GAAKjC,MAAAA,CAAO+B,MAAP/B,CAAT,EACSkC,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAIC,SAAAA,CAAUjB,MAA9B,EAAsCgB,CAAAA,EAAtC,EAA2C;AACzC,UAAIE,UAAAA,GAAaD,SAAAA,CAAUD,CAAVC,CAAjB;AACA,UAAIC,QAAAA,UAAJ,EAKA,KADA,IAAIC,SAAAA,GAAYrC,MAAAA,CAAOgB,IAAPhB,CAAYA,MAAAA,CAAOoC,UAAPpC,CAAZA,CAAhB,EAEMsC,SAAAA,GAAY,CAFlB,EAEqBC,GAAAA,GAAMF,SAAAA,CAAUnB,MADrC,EAEEoB,SAAAA,GAAYC,GAFd,EAGED,SAAAA,EAHF,EAIE;AACA,YAAIE,OAAAA,GAAUH,SAAAA,CAAUC,SAAVD,CAAd;AAAA,YACII,IAAAA,GAAOzC,MAAAA,CAAO0C,wBAAP1C,CAAgCoC,UAAhCpC,EAA4CwC,OAA5CxC,CADX;AACuDwC,aAC1CG,CAD0CH,KACnDC,IADmDD,IAC7BC,IAAAA,CAAKG,UADwBJ,KAErDP,EAAAA,CAAGO,OAAHP,CAAAA,GAAcG,UAAAA,CAAWI,OAAXJ,CAFuCI;AAE5BA;AAI/B;;AAAA,WAAOP,EAAP;AAAOA;;AAAAA,MAAAA,YAAAA,GAGM;AACbY,IAAAA,GAAAA,EArCF,YAAA;AACE,aAAK7C,MAAAA,CAAO6B,MAAP7B,GAIEA,MAAAA,CAAO6B,MAJT7B,GACI8B,oBADT;AACSA,KAkCI;AAEbA,IAAAA,oBAAAA,EAAsBA;AAFT,GAHNG;;AC5BT,WAASa,IAAT,CAAcC,MAAd,EAAsB/B,IAAtB,EAAsBA;AACpB,WAAOA,IAAAA,CAAKgC,MAALhC,CAAY,UAASiC,IAAT,EAAeC,GAAf,EAAeA;AAIhC,aAHIH,MAAAA,CAAOG,GAAPH,CAAAA,KACFE,IAAAA,CAAKC,GAALD,CAAAA,GAAYF,MAAAA,CAAOG,GAAPH,CADVA,GAGGE,IAAP;AAAOA,KAJFjC,EAKJ,EALIA,CAAP;AAkBF;;AAAA,WAASuC,YAAT,CAAsBJ,GAAtB,EAAsBA;AACpB,QAAIzC,MAAAA,GAAS,EAAb;;AACA,SAAK,IAAIwC,GAAT,IAAgBC,GAAhB,EACEzC,MAAAA,CAAO4C,IAAP5C,CAAYyC,GAAAA,CAAID,GAAJC,CAAZzC;;AAEF,WAAOA,MAAP;AAGF;;AAAA,WAAS8C,MAAT,GAASA;AACP,QAAIC,MAAAA,GAASF,YAAAA,CAAapB,SAAboB,CAAb;AAEA,WADAE,MAAAA,CAAOC,OAAPD,CAAe,EAAfA,GACOE,YAAAA,CAAad,GAAbc,GAAmBC,KAAnBD,CAAmBC,KAAMjB,CAAzBgB,EAAoCF,MAApCE,CAAP;AAuFF;;AAAA,WAAS6B,kBAAT,CAA4BC,IAA5B,EAA4BA;AAC1B,QAAIC,KAAAA,GAAQD,IAAAA,CAAKC,KAALD,CACV,mGADUA,CAAZ;AAGA,WACEC,KAAAA,IAAS;AACPD,MAAAA,IAAAA,EAAMA,IADC;AAEPE,MAAAA,QAAAA,EAAUD,KAAAA,CAAM,CAANA,CAFH;AAGPE,MAAAA,IAAAA,EAAMF,KAAAA,CAAM,CAANA,CAHC;AAIPG,MAAAA,QAAAA,EAAUH,KAAAA,CAAM,CAANA,CAJH;AAKPI,MAAAA,IAAAA,EAAMJ,KAAAA,CAAM,CAANA,CALC;AAMPK,MAAAA,QAAAA,EAAUL,KAAAA,CAAM,CAANA,CANH;AAOPM,MAAAA,MAAAA,EAAQN,KAAAA,CAAM,CAANA,CAPD;AAQPO,MAAAA,IAAAA,EAAMP,KAAAA,CAAM,CAANA;AARC,KADX;AA6BF;;AAAA,WAASW,IAAT,CAAcf,OAAd,EAAuBpC,GAAvB,EAAuBA;AACrB,QAAIoD,OAAAA,GAAU9C,MAAAA,CAAO8B,OAAP9B,CAAd;AAIA,WAHI8B,OAAAA,CAAQpC,GAARoC,CAAAA,KACFgB,OAAAA,CAAQpD,GAARoD,CAAAA,GAAehB,OAAAA,CAAQpC,GAARoC,CAAAA,CAAae,IAAbf,EADbA,GAGGgB,OAAP;AAAOA;;AAAAA,MAAAA,YAAAA,GAiCM;AACbrB,IAAAA,WAAAA,EAxGF,SAASA,WAAT,CAAqBlC,MAArB,EAA6BmC,UAA7B,EAA6BA;AAC3B,aAAsB,YAAA,OAAXnC,MAAW,IAAYoC,MAAAA,CAAOzD,OAAPyD,CAAepC,MAAfoC,CAAZ,IAAiD,SAAXpC,MAAtC,GACbA,MADa,IAGtBmC,UAAAA,GAAaA,UAAAA,IAAc,EAA3BA,EAEOlF,MAAAA,CAAOgB,IAAPhB,CAAY+C,MAAZ/C,EAAoBgD,MAApBhD,CAA2B,UAASkE,CAAT,EAAYhB,GAAZ,EAAYA;AAG5C,eADAgB,CAAAA,CAAAA,CAD0C,CAC1CA,KADagB,UAAAA,CAAWvE,OAAXuE,CAAmBhC,GAAnBgC,CACbhB,GAzCJ,UAAsBC,GAAtB,EAAsBA;AAOpB,eANA,IAEIE,IAFJ,EAAID,MAAAA,GAAS,EAAb,EACInD,KAAAA,GAAQ,CADZ,EAGIqD,aAAAA,GAAAA,CAAgB,CAHpB,EAIIC,gBAAAA,GAAAA,CAAmB,CAEvB,EAAOtD,KAAAA,GAAQkD,GAAAA,CAAIjD,MAAnB,GACEmD,IAAAA,GAAOF,GAAAA,CAAIK,UAAJL,CAAelD,KAAfkD,CAAPE,EAAsBpD,CAElBsD,gBAFkBtD,IAEEoD,IAAAA,IAAQ,EAFVpD,IAEgBoD,IAAAA,IAAQ,EAFxBpD,IAEwB,CAC1CqD,aAD0C,IACzBD,IAAAA,IAAQ,EADiB,IACXA,IAAAA,IAAQ,EAHrBpD,IAKpBmD,MAAAA,IAAU,GAAVA,EACAA,MAAAA,IAAUD,GAAAA,CAAIlD,KAAJkD,CAAAA,CAAWM,WAAXN,EANUlD,IAQpBmD,MAAAA,IAAUD,GAAAA,CAAIlD,KAAJkD,CAAAA,CAAWM,WAAXN,EARZE,EAUAC,aAAAA,GAAgBD,IAAAA,IAAQ,EAARA,IAAcA,IAAAA,IAAQ,EAVtCA,EAWAE,gBAAAA,GAAmBF,IAAAA,IAAQ,EAARA,IAAcA,IAAAA,IAAQ,EAXzCA,EAYApD,KAAAA,EAZAoD;;AAeF,iBAAOD,MAAP;AAiBgDgB,SAxClD,CAwC+DlC,GAxC/D,CAyCIgB,GADkEhB,GAClEgB,CAAAA,GAAYe,WAAAA,CAAYlC,MAAAA,CAAOG,GAAPH,CAAZkC,CAAZf,EACOA,CAAP;AAAOA,OAHFlE,EAIJ,EAJIA,CALe,CAAtB;AASG,KA6FU;AAEbqF,IAAAA,WAAAA,EA5FF,SAASA,WAAT,CAAqBtC,MAArB,EAA6BmC,UAA7B,EAAyCI,OAAzC,EAAyCA;AACvC,aAAsB,YAAA,OAAXvC,MAAW,IAAYoC,MAAAA,CAAOzD,OAAPyD,CAAepC,MAAfoC,CAAZ,IAAiD,SAAXpC,MAAtC,GACbA,MADa,IAItBmC,UAAAA,GAAaA,UAAAA,IAAc,EAA3BA,EACAI,OAAAA,GAAUA,OAAAA,IAAW,EADrBJ,EAEOlF,MAAAA,CAAOgB,IAAPhB,CAAY+C,MAAZ/C,EAAoBgD,MAApBhD,CAA2B,UAASkE,CAAT,EAAYhB,GAAZ,EAAYA;AAC5C,YA3BEwB,KA2BF;AAAA,YAAIN,MAAAA,GAAAA,CAAsC,CAAtCA,KAASc,UAAAA,CAAWvE,OAAXuE,CAAmBhC,GAAnBgC,CAATd,GAA4BlB,CA3B9BwB,KAAAA,GA2ByDxB,GAAAA,CA3B7CyB,KA2B6CzB,CA3BvC,GA2BuCA,CAA3BA,EA1BrBF,MA0BqBE,CA1Bd,UAASgB,CAAT,EAAYU,CAAZ,EAAYA;AAC9B,iBAAOV,CAAAA,GAAIU,CAAAA,CAAEC,MAAFD,CAAS,CAATA,EAAYE,WAAZF,EAAJV,GAAgCU,CAAAA,CAAEG,KAAFH,CAAQ,CAARA,CAAvC;AAA+C,SAyBf1B,EAxB/BwB,KAAAA,CAAMM,KAANN,EAwB+BxB,CAA5BkB,GAA8DlB,GAAlE;AAOA,eALAgB,CAAAA,CAAEE,MAAFF,CAAAA,GAAYmB,WAAAA,CAAYtC,MAAAA,CAAOqB,MAAPrB,CAAAA,IAAkBA,MAAAA,CAAOG,GAAPH,CAA9BsC,EAA2C,EAA3CA,EAA+CC,OAA/CD,CAAZnB,EAEIoB,OAAAA,CAAQC,YAARD,KACFpB,CAAAA,CAAEhB,GAAFgB,CAAAA,GAASmB,WAAAA,CAAYtC,MAAAA,CAAOG,GAAPH,CAAZsC,EAAyB,EAAzBA,EAA6BC,OAA7BD,CADPC,CAFJpB,EAKOA,CAAP;AAAOA,OARFlE,EASJ,EATIA,CANe,CAAtB;AAeG,KA0EU;AAGb4G,IAAAA,SAAAA,EApJF,UAAmB7D,MAAnB,EAA2BkB,eAA3B,EAA2BA;AACzB,aAAOjE,MAAAA,CAAOgB,IAAPhB,CAAY+C,MAAZ/C,EAAoBgD,MAApBhD,CAA2B,UAASkE,CAAT,EAAYhB,GAAZ,EAAYA;AAI5C,eAAA,CAHsC,CAGtC,KAHIe,eAAAA,CAAgBtD,OAAhBsD,CAAwBf,GAAxBe,CAGJ,KAFEC,CAAAA,CAAEhB,GAAFgB,CAAAA,GAASnB,MAAAA,CAAOG,GAAPH,CAEX,GAAOmB,CAAP;AAAOA,OAJFlE,EAKJ,EALIA,CAAP;AAKG,KA2IU;AAIb6G,IAAAA,KAAAA,EA/JF,UAAe9D,MAAf,EAAuB/B,IAAvB,EAAuBA;AACrB,aAAO;AACL6C,QAAAA,IAAAA,EAAM7C,IAAAA,GAAO8B,IAAAA,CAAKC,MAALD,EAAa9B,IAAb8B,CAAP9B,GAA4B+B,MAD7B;AAELe,QAAAA,IAAAA,EAAM,UAASC,OAAT,EAAkBC,KAAlB,EAAkBA;AAEtB,iBADAD,OAAAA,GAAUC,KAAAA,GAAQlB,IAAAA,CAAKiB,OAALjB,EAAckB,KAAdlB,CAARkB,GAA+BD,OAAzCA,EACOP,MAAAA,CAAOjC,KAAKsC,IAAZL,EAAkBO,OAAlBP,CAAP;AAAyBO;AAJtB,OAAP;AAI6BA,KAsJhB;AAKbjB,IAAAA,IAAAA,EAAMA,IALO;AAMbgE,IAAAA,YAAAA,EAzLF,UAAsB3D,GAAtB,EAA2BC,WAA3B,EAA2BA;AACzB,UAAIC,UAAAA,GAAa,EAAjB;;AACA,WAAK,IAAIH,GAAT,IAAgBC,GAAhB,EAAgBA,CACoB,CADpBA,KACVC,WAAAA,CAAYzC,OAAZyC,CAAoBF,GAApBE,CADUD,IAEZE,UAAAA,CAAWC,IAAXD,CAAgBH,GAAhBG,CAFYF;;AAKhB,aAAOE,UAAP;AAAOA,KA4KM;AAObG,IAAAA,MAAAA,EAAQA,MAPK;AAQbuD,IAAAA,gBAAAA,EA7DF,UAA0Bb,GAA1B,EAA0BA;AACxB,UAAKA,GAAL,EAAA;AAGA,YAAIC,MAAAA,GAASX,kBAAAA,CAAmBU,GAAnBV,CAAb;AACA,YAAA,CAAKW,MAAL,EACE,OAAO,IAAP;AAEF,YAAIC,MAAAA,GAASD,MAAAA,CAAOR,QAAPQ,GAAkB,IAAlBA,GAAyBA,MAAAA,CAAON,QAA7C;AAIA,eAHIM,MAAAA,CAAOL,IAAPK,KACFC,MAAAA,IAAU,MAAMD,MAAAA,CAAOL,IADrBK,GAGGC,MAAP;AAAOA;AAAAA,KAyCM;AASbZ,IAAAA,kBAAAA,EAAoBA,kBATP;AAUbwB,IAAAA,eAAAA,EApCF,UAAyB1B,OAAzB,EAAyBA;AACvB,aALF,UAAsBA,OAAtB,EAA+BtE,IAA/B,EAA+BA;AAC7B,eAAOA,IAAAA,CAAKgC,MAALhC,CAAYqF,IAAZrF,EAAkBsE,OAAlBtE,CAAP;AAIOuF,OALT,CAKsBjB,OALtB,EAK+B,CAAC,UAAD,EAAa,OAAb,EAAsB,aAAtB,CAL/B,CAKE;AAAmD,KAyBtC;AAWbkB,IAAAA,gBAAAA,EA3BF,SAASA,gBAAT,CAA0BrD,GAA1B,EAA+BsD,IAA/B,EAAqChG,KAArC,EAAqCA;AACf,kBAAA,OAATgG,IAAS,KAClBA,IAAAA,GAAOA,IAAAA,CAAK9B,KAAL8B,CAAW,GAAXA,CADW;AAIpB,UAAIC,IAAAA,GAAOD,IAAAA,CAAK,CAALA,CAAX;AAEItD,MAAAA,GAAAA,CAAIwD,cAAJxD,CAAmBuD,IAAnBvD,MACkB,MAAhBsD,IAAAA,CAAKvF,MAAW,GAClBiC,GAAAA,CAAIuD,IAAJvD,CAAAA,GAAY1C,KADM,GAGlB+F,gBAAAA,CAAiBrD,GAAAA,CAAIuD,IAAJvD,CAAjBqD,EAA4BC,IAAAA,CAAK1B,KAAL0B,CAAW,CAAXA,CAA5BD,EAA2C/F,KAA3C+F,CAJArD;AAI2C1C;AAKlC,GAjCN6F;;ACxJT,WAASW,SAAT,GAASA;AACP,WAAOG,MAAP;AAAOA;;AAAAA,MAAAA,aAAAA,GAcM;AACbE,IAAAA,QAAAA,EAxBF,UAAkBpB,GAAlB,EAAkBA;AAChBe,MAAAA,SAAAA,GAAYC,QAAZD,GAAuBf,GAAvBe;AAAuBf,KAsBV;AAEbqB,IAAAA,WAAAA,EArBF,YAAA;AACE,aAAON,SAAAA,GAAYE,QAAnB;AAAmBA,KAkBN;AAGbF,IAAAA,SAAAA,EAAWA,SAHE;AAIbO,IAAAA,SAAAA,EAfF,YAAA;AACE,UAAIN,QAAAA,GAAWD,SAAAA,GAAYC,QAA3B;AAAA,UACId,MAAAA,GAASc,QAAAA,CAASd,MADtB;AAOA,aAJKA,MAAAA,KACHA,MAAAA,GAASiB,YAAAA,CAAaN,gBAAbM,CAA8BH,QAAAA,CAASzB,IAAvC4B,CADNjB,CAAAA,EAIEA,MAAP;AAAOA;AAGM,GAdNgB;AAAAA,MAWAhB,cAAAA,GAAAA,eAAAA,OAAAA,UAAAA,GAAAA,UAAAA,GAAAA,eAAAA,OAAAA,MAAAA,GAAAA,MAAAA,GAAAA,eAAAA,OAAAA,MAAAA,GAAAA,MAAAA,GAAAA,eAAAA,OAAAA,IAAAA,GAAAA,IAAAA,GAAAA,EAXAgB;;AAWAhB,MAAAA,OAAAA,GAAAA,UAAAA,EAAAA,EAAAA,MAAAA,EAAAA;AAAAA,WAAAA,EAAAA,CAAAA,MAAAA,GAAAA;AAAAA,MAAAA,OAAAA,EAAAA;AAAAA,KAAAA,EAAAA,MAAAA,CAAAA,OAAAA,CAAAA,EAAAA,MAAAA,CAAAA,OAAAA;AAAAA,GAAAA,CAAAA,UAAAA,MAAAA,EAAAA;ACtBT,QAAiBqB,OAAjB,EAA0BC,UAA1B;AAAiBD,IAAAA,OAAAA,GAIHlG,cAJGkG,EAASC,UAAAA,GAIN,YAAA;AAElB,eAASG,SAAT,CAAoBC,QAApB,EAAoBA;AAClB,YAAIC,WAAAA,GAAc,EAAlB;AACA,YAAwB,MAApBD,QAAAA,CAAS5G,MAAb,EAA6B,OAAO,EAAP;AAE7B,YAA2B,YAAA,OAAhB4G,QAAAA,CAAS,CAATA,CAAX,EACE,MAAM,IAAI9F,SAAJ,CAAc,oCAAoC8F,QAAAA,CAAS,CAATA,CAAlD,CAAN;;AAIF,YAAIA,QAAAA,CAAS,CAATA,CAAAA,CAAYpC,KAAZoC,CAAkB,cAAlBA,KAAqCA,QAAAA,CAAS5G,MAAT4G,GAAkB,CAA3D,EAA8D;AAC5D,cAAIE,KAAAA,GAAQF,QAAAA,CAAS9C,KAAT8C,EAAZ;AACAA,UAAAA,QAAAA,CAAS,CAATA,CAAAA,GAAcE,KAAAA,GAAQF,QAAAA,CAAS,CAATA,CAAtBA;AAIEA;;AAAAA,QAAAA,QAAAA,CAAS,CAATA,CAAAA,CAAYpC,KAAZoC,CAAkB,cAAlBA,IACFA,QAAAA,CAAS,CAATA,CAAAA,GAAcA,QAAAA,CAAS,CAATA,CAAAA,CAAYG,OAAZH,CAAoB,eAApBA,EAAqC,QAArCA,CADZA,GAGFA,QAAAA,CAAS,CAATA,CAAAA,GAAcA,QAAAA,CAAS,CAATA,CAAAA,CAAYG,OAAZH,CAAoB,eAApBA,EAAqC,OAArCA,CAHZA;;AAMJ,aAAK,IAAI5F,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAI4F,QAAAA,CAAS5G,MAA7B,EAAqCgB,CAAAA,EAArC,EAA0C;AACxC,cAAIgG,SAAAA,GAAYJ,QAAAA,CAAS5F,CAAT4F,CAAhB;AAEA,cAAyB,YAAA,OAAdI,SAAX,EACE,MAAM,IAAIlG,SAAJ,CAAc,oCAAoCkG,SAAlD,CAAN;AAGgB,iBAAdA,SAAc,KAEdhG,CAAAA,GAAI,CAAJA,KAEFgG,SAAAA,GAAYA,SAAAA,CAAUD,OAAVC,CAAkB,QAAlBA,EAA4B,EAA5BA,CAFVhG,GAMFgG,SAAAA,GAFEhG,CAAAA,GAAI4F,QAAAA,CAAS5G,MAAT4G,GAAkB,CAAtB5F,GAEUgG,SAAAA,CAAUD,OAAVC,CAAkB,QAAlBA,EAA4B,EAA5BA,CAFVhG,GAKUgG,SAAAA,CAAUD,OAAVC,CAAkB,QAAlBA,EAA4B,GAA5BA,CATVhG,EAYJ6F,WAAAA,CAAYzE,IAAZyE,CAAiBG,SAAjBH,CAdkB;AAkBpB;;AAAA,YAAI5D,GAAAA,GAAM4D,WAAAA,CAAYI,IAAZJ,CAAiB,GAAjBA,CAAV;AAAA,YAOIrD,KAAAA,GAAAA,CAHJP,GAAAA,GAAMA,GAAAA,CAAI8D,OAAJ9D,CAAY,iBAAZA,EAA+B,IAA/BA,CAGFO,EAAYC,KAAZD,CAAkB,GAAlBA,CAPJ;AAUA,eAFAP,GAAAA,GAAMO,KAAAA,CAAMM,KAANN,MAAiBA,KAAAA,CAAMxD,MAANwD,GAAe,CAAfA,GAAmB,GAAnBA,GAAwB,EAAzCA,IAA+CA,KAAAA,CAAMyD,IAANzD,CAAW,GAAXA,CAErD;AAGF;;AAAA,aAAO,YAAA;AASL,eAAOmD,SAAAA,CANqB,YAAA,OAAjB1F,SAAAA,CAAU,CAAVA,CAAiB,GAClBA,SAAAA,CAAU,CAAVA,CADkB,GAGlB,GAAG4C,KAAH,CAASpD,IAAT,CAAcQ,SAAd,CAGH0F,CAAP;AAHwB1F,OAN1B;AAM0BA,KAvEXsF,EACsBE,MAAAA,CAAOC,OAAPD,GAAgBA,MAAAA,CAAAA,OAAAA,GAAiBD,UAAAA,EAAjCC,GAEhCF,OAAAA,CAAY,OAAZA,GAAgBC,UAAAA,EAHND;AAGMC,GDmBdtB,CAAAA;AAAAA,MEpBLgC,GAAAA,GAAMpI,MAAAA,CAAOC,SAAPD,CAAiB2G,cFoBlBP;AAAAA,MEnBL1E,SAAAA,GAAUD,KAAAA,CAAMC,OFmBX0E;AAAAA,MEjBLiC,QAAAA,GAAY,YAAA;AAEZ,SADA,IAAI/G,KAAAA,GAAQ,EAAZ,EACSY,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAI,GAApB,EAAoB,EAAOA,CAA3B,EACIZ,KAAAA,CAAMgC,IAANhC,CAAW,MAAA,CAAA,CAAQY,CAAAA,GAAI,EAAJA,GAAS,GAATA,GAAe,EAAvB,IAA6BA,CAAAA,CAAEnC,QAAFmC,CAAW,EAAXA,CAA7B,EAA6C4C,WAA7C,EAAXxD;;AAGJ,WAAOA,KAAP;AAAOA,GANK,EFiBP8E;AAAAA,MEWLwC,aAAAA,GAAgB,UAAuBC,MAAvB,EAA+BvD,OAA/B,EAA+BA;AAE/C,SADA,IAAInC,GAAAA,GAAMmC,OAAAA,IAAWA,OAAAA,CAAQwD,YAAnBxD,GAAkCtF,MAAAA,CAAO+I,MAAP/I,CAAc,IAAdA,CAAlCsF,GAAwD,EAAlE,EACSpD,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAI2G,MAAAA,CAAO3H,MAA3B,EAA2BA,EAAUgB,CAArC,EAAqCA,KACR,CADQA,KACtB2G,MAAAA,CAAO3G,CAAP2G,CADsB3G,KAE7BiB,GAAAA,CAAIjB,CAAJiB,CAAAA,GAAS0F,MAAAA,CAAO3G,CAAP2G,CAFoB3G;;AAMrC,WAAOiB,GAAP;AAAOA,GFnBFiD;AAAAA,MEmBEjD,KAAAA,GAmMM;AACbyF,IAAAA,aAAAA,EAAeA,aADF;AAEb/G,IAAAA,MAAAA,EAzIS,UAA4BE,MAA5B,EAAoC8G,MAApC,EAAoCA;AAC7C,aAAO7I,MAAAA,CAAOgB,IAAPhB,CAAY6I,MAAZ7I,EAAoBgD,MAApBhD,CAA2B,UAAUqJ,GAAV,EAAenG,GAAf,EAAeA;AAE7C,eADAmG,GAAAA,CAAInG,GAAJmG,CAAAA,GAAWR,MAAAA,CAAO3F,GAAP2F,CAAXQ,EACOA,GAAP;AAAOA,OAFJrJ,EAGJ+B,MAHI/B,CAAP;AAGG+B,KAmIU;AAGb6I,IAAAA,OAAAA,EAlBU,UAAiBzJ,CAAjB,EAAoBsJ,CAApB,EAAoBA;AAC9B,aAAO,GAAGxB,MAAH,CAAU9H,CAAV,EAAasJ,CAAb,CAAP;AAAoBA,KAcP;AAIbI,IAAAA,OAAAA,EAvDU,UAAiBpK,KAAjB,EAAiBA;AAI3B,WAHA,IAAI6H,KAAAA,GAAQ,CAAC;AAAEnF,QAAAA,GAAAA,EAAK;AAAEhD,UAAAA,CAAAA,EAAGM;AAAL,SAAP;AAAqBgI,QAAAA,IAAAA,EAAM;AAA3B,OAAD,CAAZ,EACI2B,IAAAA,GAAO,EADX,EAGSlI,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAIoG,KAAAA,CAAMpH,MAA1B,EAA0BA,EAAUgB,CAApC,EAKI,KAJA,IAAIqG,IAAAA,GAAOD,KAAAA,CAAMpG,CAANoG,CAAX,EACInF,GAAAA,GAAMoF,IAAAA,CAAKpF,GAALoF,CAASA,IAAAA,CAAKE,IAAdF,CADV,EAGIvH,IAAAA,GAAOhB,MAAAA,CAAOgB,IAAPhB,CAAYmD,GAAZnD,CAHX,EAIS2I,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAI3H,IAAAA,CAAKE,MAAzB,EAAyBA,EAAUyH,CAAnC,EAAsC;AAClC,YAAIzF,GAAAA,GAAMlC,IAAAA,CAAK2H,CAAL3H,CAAV;AAAA,YACIqJ,GAAAA,GAAMlH,GAAAA,CAAID,GAAJC,CADV;AAEmB,oBAAA,OAARkH,GAAQ,IAAoB,SAARA,GAAZ,IAAYA,CAAuC,CAAvCA,KAAgBD,IAAAA,CAAKzJ,OAALyJ,CAAaC,GAAbD,CAA5B,KACf9B,KAAAA,CAAMhF,IAANgF,CAAW;AAAEnF,UAAAA,GAAAA,EAAKA,GAAP;AAAYsF,UAAAA,IAAAA,EAAMvF;AAAlB,SAAXoF,GACA8B,IAAAA,CAAK9G,IAAL8G,CAAUC,GAAVD,CAFe;AAS3B;;AAAA,aAhMe,UAAsB9B,KAAtB,EAAsBA;AACrC,eAAOA,KAAAA,CAAMpH,MAANoH,GAAe,CAAtB,GAAyB;AACrB,cAAIC,IAAAA,GAAOD,KAAAA,CAAME,GAANF,EAAX;AAAA,cACInF,GAAAA,GAAMoF,IAAAA,CAAKpF,GAALoF,CAASA,IAAAA,CAAKE,IAAdF,CADV;;AAGA,cAAI7G,SAAAA,CAAQyB,GAARzB,CAAJ,EAAkB;AAGd,iBAFA,IAAIgH,SAAAA,GAAY,EAAhB,EAESC,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAIxF,GAAAA,CAAIjC,MAAxB,EAAwBA,EAAUyH,CAAlC,EAAkCA,KACR,CADQA,KACnBxF,GAAAA,CAAIwF,CAAJxF,CADmBwF,IAE1BD,SAAAA,CAAUpF,IAAVoF,CAAevF,GAAAA,CAAIwF,CAAJxF,CAAfuF,CAF0BC;;AAMlCJ,YAAAA,IAAAA,CAAKpF,GAALoF,CAASA,IAAAA,CAAKE,IAAdF,IAAsBG,SAAtBH;AAAsBG;AAAAA;AAgL9B4B,OA9Le,CA8LFhC,KA9LE,GAgMR7H,KAAP;AAAOA,KA8BM;AAKbqK,IAAAA,MAAAA,EArIS,UAAU3G,GAAV,EAAemF,OAAf,EAAwBC,OAAxB,EAAwBA;AACjC,UAAIC,cAAAA,GAAiBrF,GAAAA,CAAI8D,OAAJ9D,CAAY,KAAZA,EAAmB,GAAnBA,CAArB;AACA,UAAgB,iBAAZoF,OAAJ,EAEI,OAAOC,cAAAA,CAAevB,OAAfuB,CAAuB,gBAAvBA,EAAyCC,QAAzCD,CAAP;;AAGJ,UAAA;AACI,eAAOE,kBAAAA,CAAmBF,cAAnBE,CAAP;AACF,OAFF,CAEE,OAAOC,CAAP,EAAOA;AACL,eAAOH,cAAP;AAAOA;AAAAA,KAsHE;AAMbuB,IAAAA,MAAAA,EAxHS,UAAgB5G,GAAhB,EAAqByF,cAArB,EAAqCL,OAArC,EAAqCA;AAG9C,UAAmB,MAAfpF,GAAAA,CAAIjD,MAAR,EACI,OAAOiD,GAAP;AAGJ,UAAI0F,MAAAA,GAAS1F,GAAb;AAOA,UANmB,YAAA,OAARA,GAAQ,GACf0F,MAAAA,GAASC,MAAAA,CAAO7J,SAAP6J,CAAiB/J,QAAjB+J,CAA0BnI,IAA1BmI,CAA+B3F,GAA/B2F,CADM,GAEO,YAAA,OAAR3F,GAAQ,KACtB0F,MAAAA,GAASE,MAAAA,CAAO5F,GAAP4F,CADa,CAFP,EAMH,iBAAZR,OAAJ,EACI,OAAOS,MAAAA,CAAOH,MAAPG,CAAAA,CAAe/B,OAAf+B,CAAuB,iBAAvBA,EAA0C,UAAUC,EAAV,EAAUA;AACvD,eAAO,WAAWC,QAAAA,CAASD,EAAAA,CAAGlF,KAAHkF,CAAS,CAATA,CAATC,EAAsB,EAAtBA,CAAX,GAAuC,KAA9C;AAA8C,OAD3CF,CAAP;;AAMJ,WADA,IAAIG,GAAAA,GAAM,EAAV,EACSjI,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAI2H,MAAAA,CAAO3I,MAA3B,EAA2BA,EAAUgB,CAArC,EAAwC;AACpC,YAAI0C,CAAAA,GAAIiF,MAAAA,CAAOrF,UAAPqF,CAAkB3H,CAAlB2H,CAAR;AAGU,eAANjF,CAAM,IACG,OAANA,CADG,IAEG,OAANA,CAFG,IAGG,QAANA,CAHG,IAIFA,CAAAA,IAAK,EAALA,IAAaA,CAAAA,IAAK,EAJhB,IAKFA,CAAAA,IAAK,EAALA,IAAaA,CAAAA,IAAK,EALhB,IAMFA,CAAAA,IAAK,EAALA,IAAaA,CAAAA,IAAK,GANhB,GAQNuF,GAAAA,IAAON,MAAAA,CAAOhF,MAAPgF,CAAc3H,CAAd2H,CARD,GAYNjF,CAAAA,GAAI,GAAJA,GACAuF,GAAAA,IAAY9B,QAAAA,CAASzD,CAATyD,CADZzD,GAKAA,CAAAA,GAAI,IAAJA,GACAuF,GAAAA,IAAa9B,QAAAA,CAAS,MAAQzD,CAAAA,IAAK,CAAtByD,CAAAA,GAA4BA,QAAAA,CAAS,MAAY,KAAJzD,CAAjByD,CADzCzD,GAKAA,CAAAA,GAAI,KAAJA,IAAcA,CAAAA,IAAK,KAAnBA,GACAuF,GAAAA,IAAa9B,QAAAA,CAAS,MAAQzD,CAAAA,IAAK,EAAtByD,CAAAA,GAA6BA,QAAAA,CAAS,MAASzD,CAAAA,IAAK,CAALA,GAAU,EAA5ByD,CAA7BA,GAAkEA,QAAAA,CAAS,MAAY,KAAJzD,CAAjByD,CAD/EzD,IAKJ1C,CAAAA,IAAK,CAALA,EACA0C,CAAAA,GAAI,SAAA,CAAiB,OAAJA,CAAb,KAA2B,EAA3B,GAAyD,OAAvBiF,MAAAA,CAAOrF,UAAPqF,CAAkB3H,CAAlB2H,CAAlC,CADJ3H,EAEAiI,GAAAA,IAAO9B,QAAAA,CAAS,MAAQzD,CAAAA,IAAK,EAAtByD,CAAAA,GACDA,QAAAA,CAAS,MAASzD,CAAAA,IAAK,EAALA,GAAW,EAA7ByD,CADCA,GAEDA,QAAAA,CAAS,MAASzD,CAAAA,IAAK,CAALA,GAAU,EAA5ByD,CAFCA,GAGDA,QAAAA,CAAS,MAAY,KAAJzD,CAAjByD,CAVFzD,CAtBM;AAmCd;;AAAA,aAAOuF,GAAP;AAAOA,KAsDM;AAObK,IAAAA,QAAAA,EA9BW,UAAkBrH,GAAlB,EAAkBA;AAC7B,aAAA,EAAA,CAAKA,GAAL,IAA2B,YAAA,OAARA,GAAnB,KAAmBA,CAAAA,EAITA,GAAAA,CAAIoH,WAAJpH,IAAmBA,GAAAA,CAAIoH,WAAJpH,CAAgBqH,QAAnCrH,IAA+CA,GAAAA,CAAIoH,WAAJpH,CAAgBqH,QAAhBrH,CAAyBA,GAAzBA,CAJtCA,CAAnB;AAIkFA,KAkBrE;AAQb6H,IAAAA,QAAAA,EAnCW,UAAkB7H,GAAlB,EAAkBA;AAC7B,aAA+C,sBAAxCnD,MAAAA,CAAOC,SAAPD,CAAiBD,QAAjBC,CAA0B2B,IAA1B3B,CAA+BmD,GAA/BnD,CAAP;AAAsCmD,KA0BzB;AASb8H,IAAAA,QAAAA,EApBW,UAAkBZ,GAAlB,EAAuBK,EAAvB,EAAuBA;AAClC,UAAIhJ,SAAAA,CAAQ2I,GAAR3I,CAAJ,EAAkB;AAEd,aADA,IAAIiJ,MAAAA,GAAS,EAAb,EACSzI,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAImI,GAAAA,CAAInJ,MAAxB,EAAgCgB,CAAAA,IAAK,CAArC,EACIyI,MAAAA,CAAOrH,IAAPqH,CAAYD,EAAAA,CAAGL,GAAAA,CAAInI,CAAJmI,CAAHK,CAAZC;;AAEJ,eAAOA,MAAP;AAEJ;;AAAA,aAAOD,EAAAA,CAAGL,GAAHK,CAAP;AAAUL,KAGG;AAUbxD,IAAAA,KAAAA,EA1MQ,SAASA,KAAT,CAAe9E,MAAf,EAAuB8G,MAAvB,EAA+BvD,OAA/B,EAA+BA;AAEvC,UAAA,CAAKuD,MAAL,EACI,OAAO9G,MAAP;;AAGJ,UAAsB,YAAA,OAAX8G,MAAX,EAAgC;AAC5B,YAAInH,SAAAA,CAAQK,MAARL,CAAJ,EACIK,MAAAA,CAAOuB,IAAPvB,CAAY8G,MAAZ9G,EADJ,KAEO;AAAA,cAAA,CAAIA,MAAJ,IAAgC,YAAA,OAAXA,MAArB,EAKH,OAAO,CAACA,MAAD,EAAS8G,MAAT,CAAP;AAAgBA,WAJXvD,OAAAA,KAAYA,OAAAA,CAAQwD,YAARxD,IAAwBA,OAAAA,CAAQ0D,eAA5C1D,CAAAA,IAA4C0D,CAAsBZ,GAAAA,CAAIzG,IAAJyG,CAASpI,MAAAA,CAAOC,SAAhBmI,EAA2BS,MAA3BT,CAIvDS,MAHZ9G,MAAAA,CAAO8G,MAAP9G,CAAAA,GAAO8G,CAAU,CAGLA;AAGpB;AAAA,eAAO9G,MAAP;AAGJ;;AAAA,UAAA,CAAKA,MAAL,IAAiC,YAAA,OAAXA,MAAtB,EACI,OAAO,CAACA,MAAD,EAASkH,MAAT,CAAgBJ,MAAhB,CAAP;AAGJ,UAAIK,WAAAA,GAAcnH,MAAlB;AAKA,aAJIL,SAAAA,CAAQK,MAARL,CAAAA,IAAQK,CAAYL,SAAAA,CAAQmH,MAARnH,CAApBA,KACAwH,WAAAA,GAAcN,aAAAA,CAAc7G,MAAd6G,EAAsBtD,OAAtBsD,CADdlH,GAIAA,SAAAA,CAAQK,MAARL,CAAAA,IAAmBA,SAAAA,CAAQmH,MAARnH,CAAnBA,IACAmH,MAAAA,CAAOM,OAAPN,CAAe,UAAUN,IAAV,EAAgBrG,CAAhB,EAAgBA;AAC3B,YAAIkG,GAAAA,CAAIzG,IAAJyG,CAASrG,MAATqG,EAAiBlG,CAAjBkG,CAAJ,EAAyB;AACrB,cAAIgB,UAAAA,GAAarH,MAAAA,CAAOG,CAAPH,CAAjB;AACIqH,UAAAA,UAAAA,IAAoC,YAAA,OAAfA,UAArBA,IAAgDb,IAAhDa,IAAwE,YAAA,OAATb,IAA/Da,GACArH,MAAAA,CAAOG,CAAPH,CAAAA,GAAY8E,KAAAA,CAAMuC,UAANvC,EAAkB0B,IAAlB1B,EAAwBvB,OAAxBuB,CADZuC,GAGArH,MAAAA,CAAOuB,IAAPvB,CAAYwG,IAAZxG,CAHAqH;AAGYb,SALpB,MAQIxG,MAAAA,CAAOG,CAAPH,CAAAA,GAAYwG,IAAZxG;AAAYwG,OATpBM,GAYO9G,MAbPL,IAgBG1B,MAAAA,CAAOgB,IAAPhB,CAAY6I,MAAZ7I,EAAoBgD,MAApBhD,CAA2B,UAAUqJ,GAAV,EAAenG,GAAf,EAAeA;AAC7C,YAAIzC,KAAAA,GAAQoI,MAAAA,CAAO3F,GAAP2F,CAAZ;AAOA,eALIT,GAAAA,CAAIzG,IAAJyG,CAASiB,GAATjB,EAAclF,GAAdkF,IACAiB,GAAAA,CAAInG,GAAJmG,CAAAA,GAAWxC,KAAAA,CAAMwC,GAAAA,CAAInG,GAAJmG,CAANxC,EAAgBpG,KAAhBoG,EAAuBvB,OAAvBuB,CADXuB,GAGAiB,GAAAA,CAAInG,GAAJmG,CAAAA,GAAW5I,KAHX2H,EAKGiB,GAAP;AAAOA,OARJrJ,EASJkJ,WATIlJ,CAhBP;AAyBGkJ;AA0IU,GFtNR9C;AAAAA,MGpBL6B,OAAAA,GAAU8B,MAAAA,CAAO9J,SAAP8J,CAAiB9B,OHoBtB7B;AAAAA,MGnBL8E,eAAAA,GAAkB,MHmBb9E;AAAAA,MGfL+E,MAAAA,GAAS;AACTC,IAAAA,OAAAA,EAAS,SADA;AAETC,IAAAA,OAAAA,EAAS;AAFA,GHeJjF;AAAAA,MGbI,OAAA,GAGIkF,KAAAA,CAAKzJ,MAALyJ,CACb;AACIC,IAAAA,OAAAA,EAAWJ,MAAAA,CAAOE,OADtB;AAEIG,IAAAA,UAAAA,EAAY;AACRJ,MAAAA,OAAAA,EAAS,UAAU3K,KAAV,EAAUA;AACf,eAAOwH,OAAAA,CAAQtG,IAARsG,CAAaxH,KAAbwH,EAAoBiD,eAApBjD,EAAqC,GAArCA,CAAP;AAA4C,OAFxC;AAIRoD,MAAAA,OAAAA,EAAS,UAAU5K,KAAV,EAAUA;AACf,eAAOsJ,MAAAA,CAAOtJ,KAAPsJ,CAAP;AAActJ;AALV;AAFhB,GADa6K,EAYbH,MAZaG,CHURlF;AAAAA,MIlBLgC,KAAAA,GAAMpI,MAAAA,CAAOC,SAAPD,CAAiB2G,cJkBlBP;AAAAA,MIhBLqF,qBAAAA,GAAwB;AACxBC,IAAAA,QAAAA,EAAU,UAAkBC,MAAlB,EAAkBA;AACxB,aAAOA,MAAAA,GAAS,IAAhB;AAAgB,KAFI;AAIxBC,IAAAA,KAAAA,EAAO,OAJiB;AAKxBC,IAAAA,OAAAA,EAAS,UAAiBF,MAAjB,EAAyBzI,GAAzB,EAAyBA;AAC9B,aAAOyI,MAAAA,GAAS,GAATA,GAAezI,GAAfyI,GAAqB,GAA5B;AAA4B,KANR;AAQxBG,IAAAA,MAAAA,EAAQ,UAAgBH,MAAhB,EAAgBA;AACpB,aAAOA,MAAP;AAAOA;AATa,GJgBnBvF;AAAAA,MIHL1E,SAAAA,GAAUD,KAAAA,CAAMC,OJGX0E;AAAAA,MIFL9C,IAAAA,GAAO7B,KAAAA,CAAMxB,SAANwB,CAAgB6B,IJElB8C;AAAAA,MIDL2F,WAAAA,GAAc,UAAUC,GAAV,EAAeC,YAAf,EAAeA;AAC7B3I,IAAAA,IAAAA,CAAKM,KAALN,CAAW0I,GAAX1I,EAAgB5B,SAAAA,CAAQuK,YAARvK,CAAAA,GAAwBuK,YAAxBvK,GAAuC,CAACuK,YAAD,CAAvD3I;AAAwD2I,GJAnD7F;AAAAA,MIGL8F,KAAAA,GAAQC,IAAAA,CAAKlM,SAALkM,CAAeC,WJHlBhG;AAAAA,MIKLiG,aAAAA,GAAgBC,OAAAA,CAAiB,OJL5BlG;AAAAA,MIMLmG,QAAAA,GAAW;AACXC,IAAAA,cAAAA,EAAAA,CAAgB,CADL;AAEXC,IAAAA,SAAAA,EAAAA,CAAW,CAFA;AAGXlD,IAAAA,OAAAA,EAAS,OAHE;AAIXmD,IAAAA,eAAAA,EAAAA,CAAiB,CAJN;AAKXC,IAAAA,SAAAA,EAAW,GALA;AAMX5B,IAAAA,MAAAA,EAAAA,CAAQ,CANG;AAOX6B,IAAAA,OAAAA,EAASC,KAAAA,CAAM9B,MAPJ;AAQX+B,IAAAA,gBAAAA,EAAAA,CAAkB,CARP;AASXC,IAAAA,MAAAA,EAAQV,aATG;AAUXW,IAAAA,SAAAA,EAAWV,OAAAA,CAAQd,UAARc,CAAmBD,aAAnBC,CAVA;AAYXT,IAAAA,OAAAA,EAAAA,CAAS,CAZE;AAaXoB,IAAAA,aAAAA,EAAe,UAAuBC,IAAvB,EAAuBA;AAClC,aAAOhB,KAAAA,CAAMvK,IAANuK,CAAWgB,IAAXhB,CAAP;AAAkBgB,KAdX;AAgBXC,IAAAA,SAAAA,EAAAA,CAAW,CAhBA;AAiBXC,IAAAA,kBAAAA,EAAAA,CAAoB;AAjBT,GJNNhH;AAAAA,MIkCLkH,SAAAA,GAAY,SAASA,SAAT,CACZvK,MADY,EAEZ4I,MAFY,EAGZ4B,mBAHY,EAIZH,kBAJY,EAKZD,SALY,EAMZP,OANY,EAOZY,MAPY,EAQZC,IARY,EASZhB,SATY,EAUZQ,aAVY,EAWZD,SAXY,EAYZF,gBAZY,EAaZvD,OAbY,EAaZA;AAEA,QAvBuD8D,CAuBvD;AAAA,QAAIlK,GAAAA,GAAMJ,MAAV;;AAcA,QAbsB,cAAA,OAAXyK,MAAW,GAClBrK,GAAAA,GAAMqK,MAAAA,CAAO7B,MAAP6B,EAAerK,GAAfqK,CADY,GAEXrK,GAAAA,YAAegJ,IAAfhJ,GACPA,GAAAA,GAAM8J,aAAAA,CAAc9J,GAAd8J,CADC9J,GAEwB,YAAxBoK,mBAAwB,IAAW7L,SAAAA,CAAQyB,GAARzB,CAAX,KAC/ByB,GAAAA,GAAM0J,KAAAA,CAAM5B,QAAN4B,CAAe1J,GAAf0J,EAAoB,UAAUpM,KAAV,EAAUA;AAChC,aAAIA,KAAAA,YAAiB0L,IAAjB1L,GACOwM,aAAAA,CAAcxM,KAAdwM,CADPxM,GAGGA,KAHP;AAGOA,KAJLoM,EAKH1E,IALG0E,CAKE,GALFA,CADyB,CAJb,EAaV,SAAR1J,GAAJ,EAAkB;AACd,UAAIiK,kBAAJ,EACI,OAAOR,OAAAA,IAAAA,CAAYE,gBAAZF,GAA+BA,OAAAA,CAAQjB,MAARiB,EAAgBL,QAAAA,CAASK,OAAzBA,EAAkCrD,OAAlCqD,EAA2C,KAA3CA,CAA/BA,GAAmFjB,MAA1F;AAGJxI,MAAAA,GAAAA,GAAM,EAANA;AAGJ;;AAAA,QA5CoB,YAAA,QADmCkK,CAAAA,GA6C7BlK,GA5CN,CAAA,IACA,YAAA,OAANkK,CADM,IAEA,aAAA,OAANA,CAFM,IAGA,YAAA,OAANA,CAHM,IAIA,YAAA,OAANA,CAJM,IA4CcR,KAAAA,CAAMrC,QAANqC,CAAe1J,GAAf0J,CAAlC,EACI,OAAID,OAAAA,GAEO,CAACI,SAAAA,CADOF,gBAAAA,GAAmBnB,MAAnBmB,GAA4BF,OAAAA,CAAQjB,MAARiB,EAAgBL,QAAAA,CAASK,OAAzBA,EAAkCrD,OAAlCqD,EAA2C,KAA3CA,CACnCI,CAAAA,GAAsB,GAAtBA,GAA4BA,SAAAA,CAAUJ,OAAAA,CAAQzJ,GAARyJ,EAAaL,QAAAA,CAASK,OAAtBA,EAA+BrD,OAA/BqD,EAAwC,OAAxCA,CAAVI,CAA7B,CAFPJ,GAIG,CAACI,SAAAA,CAAUrB,MAAVqB,CAAAA,GAAoB,GAApBA,GAA0BA,SAAAA,CAAUjD,MAAAA,CAAO5G,GAAP4G,CAAViD,CAA3B,CAJP;AAOJ,QAMIU,OANJ;AAAA,QAAIhN,MAAAA,GAAS,EAAb;AAEA,QAAA,KAAmB,CAAnB,KAAWyC,GAAX,EACI,OAAOzC,MAAP;AAIJ,QAAIgB,SAAAA,CAAQ8L,MAAR9L,CAAJ,EACIgM,OAAAA,GAAUF,MAAVE,CADJ,KAEO;AACH,UAAI1M,IAAAA,GAAOhB,MAAAA,CAAOgB,IAAPhB,CAAYmD,GAAZnD,CAAX;AACA0N,MAAAA,OAAAA,GAAUD,IAAAA,GAAOzM,IAAAA,CAAKyM,IAALzM,CAAUyM,IAAVzM,CAAPyM,GAAyBzM,IAAnC0M;AAGJ;;AAAA,SAAK,IAAIxL,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAIwL,OAAAA,CAAQxM,MAA5B,EAA4BA,EAAUgB,CAAtC,EAAyC;AACrC,UAAIgB,GAAAA,GAAMwK,OAAAA,CAAQxL,CAARwL,CAAV;AAAA,UACIjN,KAAAA,GAAQ0C,GAAAA,CAAID,GAAJC,CADZ;;AAGA,UAAA,CAAIgK,SAAJ,IAA2B,SAAV1M,KAAjB,EAAA;AAIA,YAAIkN,SAAAA,GAAYjM,SAAAA,CAAQyB,GAARzB,CAAAA,GACqB,cAAA,OAAxB6L,mBAAwB,GAAaA,mBAAAA,CAAoB5B,MAApB4B,EAA4BrK,GAA5BqK,CAAb,GAAgD5B,MADrEjK,GAEViK,MAAAA,IAAUc,SAAAA,GAAY,MAAMvJ,GAAlBuJ,GAAwB,MAAMvJ,GAAN,GAAY,GAA9CyI,CAFN;AAIAI,QAAAA,WAAAA,CAAYrL,MAAZqL,EAAoBuB,SAAAA,CAChB7M,KADgB6M,EAEhBK,SAFgBL,EAGhBC,mBAHgBD,EAIhBF,kBAJgBE,EAKhBH,SALgBG,EAMhBV,OANgBU,EAOhBE,MAPgBF,EAQhBG,IARgBH,EAShBb,SATgBa,EAUhBL,aAVgBK,EAWhBN,SAXgBM,EAYhBR,gBAZgBQ,EAahB/D,OAbgB+D,CAApBvB,CAAAA;AAaIxC;AAIR;;AAAA,WAAO7I,MAAP;AAAOA,GJ1HF0F;AAAAA,MI0HE1F,aAAAA,IC5IDV,MAAAA,CAAOC,SAAPD,CAAiB2G,cAAjB3G,EACIyB,KAAAA,CAAMC,OADV1B,ED6LO,UAAU+C,MAAV,EAAkB6K,IAAlB,EAAkBA;AAC/B,QAGIF,OAHJ;AAAA,QAAIvK,GAAAA,GAAMJ,MAAV;AAAA,QACIuC,OAAAA,GAhDwB,UAAmCsI,IAAnC,EAAmCA;AAC/D,UAAA,CAAKA,IAAL,EACI,OAAOrB,QAAP;AAGJ,UAAqB,SAAjBqB,IAAAA,CAAKhB,OAAY,IAAZA,KAAqCjK,CAArCiK,KAAoBgB,IAAAA,CAAKhB,OAAb,IAA8D,cAAA,OAAjBgB,IAAAA,CAAKhB,OAAvE,EACI,MAAM,IAAI5K,SAAJ,CAAc,+BAAd,CAAN;AAGJ,UAAIuH,OAAAA,GAAUqE,IAAAA,CAAKrE,OAALqE,IAAgBrB,QAAAA,CAAShD,OAAvC;AACA,UAAA,KAA4B,CAA5B,KAAWqE,IAAAA,CAAKrE,OAAhB,IAA4D,YAAjBqE,IAAAA,CAAKrE,OAAhD,IAAwF,iBAAjBqE,IAAAA,CAAKrE,OAA5E,EACI,MAAM,IAAIvH,SAAJ,CAAc,mEAAd,CAAN;AAGJ,UAAI+K,MAAAA,GAAST,OAAAA,CAAiB,OAA9B;;AACA,UAAA,KAA2B,CAA3B,KAAWsB,IAAAA,CAAKb,MAAhB,EAAwC;AACpC,YAAA,CAAK3E,KAAAA,CAAIzG,IAAJyG,CAASkE,OAAAA,CAAQd,UAAjBpD,EAA6BwF,IAAAA,CAAKb,MAAlC3E,CAAL,EACI,MAAM,IAAIpG,SAAJ,CAAc,iCAAd,CAAN;AAEJ+K,QAAAA,MAAAA,GAASa,IAAAA,CAAKb,MAAdA;AAEJ;;AAAA,UAAIC,SAAAA,GAAYV,OAAAA,CAAQd,UAARc,CAAmBS,MAAnBT,CAAhB;AAAA,UAEIkB,MAAAA,GAASjB,QAAAA,CAASiB,MAFtB;AAOA,aAAA,CAJ2B,cAAA,OAAhBI,IAAAA,CAAKJ,MAAW,IAAc9L,SAAAA,CAAQkM,IAAAA,CAAKJ,MAAb9L,CAIzC,MAHI8L,MAAAA,GAASI,IAAAA,CAAKJ,MAGlB,GAAO;AACHhB,QAAAA,cAAAA,EAA+C,aAAA,OAAxBoB,IAAAA,CAAKpB,cAAmB,GAAYoB,IAAAA,CAAKpB,cAAjB,GAAkCD,QAAAA,CAASC,cADvF;AAEHC,QAAAA,SAAAA,EAAAA,KAAqC,CAArCA,KAAkBmB,IAAAA,CAAKnB,SAAvBA,GAAmDF,QAAAA,CAASE,SAA5DA,GAA4DA,CAAAA,CAAcmB,IAAAA,CAAKnB,SAF5E;AAGHlD,QAAAA,OAAAA,EAASA,OAHN;AAIHmD,QAAAA,eAAAA,EAAiD,aAAA,OAAzBkB,IAAAA,CAAKlB,eAAoB,GAAYkB,IAAAA,CAAKlB,eAAjB,GAAmCH,QAAAA,CAASG,eAJ1F;AAKHC,QAAAA,SAAAA,EAAAA,KAAqC,CAArCA,KAAkBiB,IAAAA,CAAKjB,SAAvBA,GAAmDJ,QAAAA,CAASI,SAA5DA,GAAwEiB,IAAAA,CAAKjB,SAL1E;AAMH5B,QAAAA,MAAAA,EAA+B,aAAA,OAAhB6C,IAAAA,CAAK7C,MAAW,GAAY6C,IAAAA,CAAK7C,MAAjB,GAA0BwB,QAAAA,CAASxB,MAN/D;AAOH6B,QAAAA,OAAAA,EAAiC,cAAA,OAAjBgB,IAAAA,CAAKhB,OAAY,GAAagB,IAAAA,CAAKhB,OAAlB,GAA4BL,QAAAA,CAASK,OAPnE;AAQHE,QAAAA,gBAAAA,EAAmD,aAAA,OAA1Bc,IAAAA,CAAKd,gBAAqB,GAAYc,IAAAA,CAAKd,gBAAjB,GAAoCP,QAAAA,CAASO,gBAR7F;AASHU,QAAAA,MAAAA,EAAQA,MATL;AAUHR,QAAAA,SAAAA,EAAWA,SAVR;AAWHC,QAAAA,aAAAA,EAA6C,cAAA,OAAvBW,IAAAA,CAAKX,aAAkB,GAAaW,IAAAA,CAAKX,aAAlB,GAAkCV,QAAAA,CAASU,aAXrF;AAYHE,QAAAA,SAAAA,EAAqC,aAAA,OAAnBS,IAAAA,CAAKT,SAAc,GAAYS,IAAAA,CAAKT,SAAjB,GAA6BZ,QAAAA,CAASY,SAZxE;AAaHM,QAAAA,IAAAA,EAA2B,cAAA,OAAdG,IAAAA,CAAKH,IAAS,GAAaG,IAAAA,CAAKH,IAAlB,GAAyB,IAbjD;AAcHL,QAAAA,kBAAAA,EAAuD,aAAA,OAA5BQ,IAAAA,CAAKR,kBAAuB,GAAYQ,IAAAA,CAAKR,kBAAjB,GAAsCb,QAAAA,CAASa;AAdnG,OAAP;AAoBcS,KAhDc,CAgDYD,IAhDZ,CA+C5B;;AAM8B,kBAAA,OAAnBtI,OAAAA,CAAQkI,MAAW,GAE1BrK,GAAAA,GAAAA,CADAqK,GAASlI,OAAAA,CAAQkI,MACjBrK,EAAa,EAAbA,EAAiBA,GAAjBA,CAF0B,GAGnBzB,SAAAA,CAAQ4D,OAAAA,CAAQkI,MAAhB9L,CAAAA,KAEPgM,OAAAA,GADSpI,OAAAA,CAAQkI,MADV9L,CAHmB;AAQ9B,QAMIoM,WANJ;AAAA,QAAI9M,IAAAA,GAAO,EAAX;AAEA,QAAmB,YAAA,OAARmC,GAAQ,IAAoB,SAARA,GAA/B,EACI,OAAO,EAAP;AAKA2K,IAAAA,WAAAA,GADAF,IAAAA,IAAQA,IAAAA,CAAKE,WAALF,IAAoBnC,qBAA5BmC,GACcA,IAAAA,CAAKE,WADnBF,GAEOA,IAAAA,IAAQ,aAAaA,IAArBA,GACOA,IAAAA,CAAK/B,OAAL+B,GAAe,SAAfA,GAA2B,QADlCA,GAGO,SAJdE;AAOJ,QAAIP,mBAAAA,GAAsB9B,qBAAAA,CAAsBqC,WAAtBrC,CAA1B;AAEKiC,IAAAA,OAAAA,KACDA,OAAAA,GAAU1N,MAAAA,CAAOgB,IAAPhB,CAAYmD,GAAZnD,CADT0N,CAAAA,EAIDpI,OAAAA,CAAQmI,IAARnI,IACAoI,OAAAA,CAAQD,IAARC,CAAapI,OAAAA,CAAQmI,IAArBC,CALCA;;AAQL,SAAK,IAAIxL,CAAAA,GAAI,CAAb,EAAgBA,CAAAA,GAAIwL,OAAAA,CAAQxM,MAA5B,EAA4BA,EAAUgB,CAAtC,EAAyC;AACrC,UAAIgB,GAAAA,GAAMwK,OAAAA,CAAQxL,CAARwL,CAAV;AAEIpI,MAAAA,OAAAA,CAAQ6H,SAAR7H,IAAkC,SAAbnC,GAAAA,CAAID,GAAJC,CAArBmC,IAGJyG,WAAAA,CAAY/K,IAAZ+K,EAAkBuB,SAAAA,CACdnK,GAAAA,CAAID,GAAJC,CADcmK,EAEdpK,GAFcoK,EAGdC,mBAHcD,EAIdhI,OAAAA,CAAQ8H,kBAJME,EAKdhI,OAAAA,CAAQ6H,SALMG,EAMdhI,OAAAA,CAAQyF,MAARzF,GAAiBA,OAAAA,CAAQsH,OAAzBtH,GAAmC,IANrBgI,EAOdhI,OAAAA,CAAQkI,MAPMF,EAQdhI,OAAAA,CAAQmI,IARMH,EASdhI,OAAAA,CAAQmH,SATMa,EAUdhI,OAAAA,CAAQ2H,aAVMK,EAWdhI,OAAAA,CAAQ0H,SAXMM,EAYdhI,OAAAA,CAAQwH,gBAZMQ,EAadhI,OAAAA,CAAQiE,OAbM+D,CAAlBvB,CAHIzG;AAoBR;;AAAA,QAAIyI,MAAAA,GAAS/M,IAAAA,CAAKmH,IAALnH,CAAUsE,OAAAA,CAAQqH,SAAlB3L,CAAb;AAAA,QACI2K,MAAAA,GAAAA,CAAoC,CAApCA,KAASrG,OAAAA,CAAQkH,cAAjBb,GAA2C,GAA3CA,GAAiD,EADrD;AAaA,WAVIrG,OAAAA,CAAQoH,eAARpH,KACwB,iBAApBA,OAAAA,CAAQiE,OAAY,GAEpBoC,MAAAA,IAAU,sBAFU,GAKpBA,MAAAA,IAAU,iBANdrG,GAUGyI,MAAAA,CAAO7M,MAAP6M,GAAgB,CAAhBA,GAAoBpC,MAAAA,GAASoC,MAA7BA,GAAsC,EAA7C;AAA6C,GA7HtCrN,CJ1HF0F;;AMlBT,WAAS4H,YAAT,CAAsBC,OAAtB,EAAsBA;AACpB1M,SAAK0M,OAAL1M,GAAe0M,OAAf1M,EACAA,KAAK2M,cAAL3M,GAAsB,IADtBA,EAEAA,KAAK+D,OAAL/D,GAAe,IAFfA;ACFF;;AAAA,WAASgP,aAAT,CAAuBtC,OAAvB,EAAuBA;AACrB1M,SAAK0M,OAAL1M,GAAe0M,OAAf1M;ACAF;;AAAA,WAASqP,aAAT,GAASA;AACPrP,SAAK0M,OAAL1M,GAAe,IAAfA,EACAA,KAAKsP,OAALtP,GAAesP,WADftP,EAEAA,KAAKuP,mBAALvP,GAA2B,CAAC,iBAAD,EAAoB,uBAApB,CAF3BA;AAE+C;;AAAA,SFGjDyM,YAAAA,CAAa/N,SAAb+N,CAAuBG,OAAvBH,GAAiC,UAAS1I,OAAT,EAASA;AACxC,QAAI8I,KAAAA,GAAQ7M,IAAZ;AAAA,QACI8M,OAAAA,GAAUC,aAAAA,CAAcrH,SAAdqH,EADd;AAAA,QAGIpI,GAAAA,GAAMZ,OAAAA,CAAQY,GAARZ,IAAe,aAHzB;AAAA,QAIIiJ,YAAAA,GAAejJ,OAAAA,CAAQiJ,YAARjJ,IAAwB,EAJ3C;;AAMAiJ,IAAAA,YAAAA,CAAarH,QAAbqH,GAAwB,KAAxBA,EAAwB,OACjBA,YAAAA,CAAaC,KADpBD,EACoBC,OACbD,YAAAA,CAAaE,MAFpBF;AAIA,QAAIG,cAAAA,GAAiBC,aAAAA,CAAaJ,YAAbI,EAA2B;AAC9C5D,MAAAA,MAAAA,EAAAA,CAAQ,CADsC;AAE9C4B,MAAAA,SAAAA,EAAW;AAFmC,KAA3BgC,CAArB;AAKA,WAAIpN,KAAK2M,cAAL3M,IAAK2M,CAAmB3M,KAAK2M,cAAL3M,CAAoBqN,MAA5CrN,KAIJA,KAAK2M,cAAL3M,GAAsB8M,OAAAA,CAAQQ,IAARR,CAAanI,GAAbmI,EAAkB,QAAlBA,EAA4BK,cAA5BL,CAAtB9M,EAEAA,KAAK2M,cAAL3M,CAAoBuN,IAApBvN,GAA2B,UAASwN,OAAT,EAASA;AAClCX,MAAAA,KAAAA,CAAMF,cAANE,CAAqBW,OAArBX,GAA+BW,OAA/BX,EACA7M,KAAKyN,KAALzN,EADA6M,EAEAA,KAAAA,CAAMF,cAANE,GAAuB,IAFvBA;AAEuB,KATrB7M,GACKA,KAAK2M,cADd;AACcA,GAjBhBF,EA+BAA,YAAAA,CAAa/N,SAAb+N,CAAuBiB,IAAvBjB,GAA8B,UAAS9H,GAAT,EAAcgJ,CAAd,EAAiB5J,OAAjB,EAA0B6J,EAA1B,EAA0BA;AACtD,QAAIf,KAAAA,GAAQ7M,IAAZ;;AACAA,SAAK2E,GAAL3E,GAAW2E,GAAX3E,EACAA,KAAK+D,OAAL/D,GAAe+D,OADf/D,EAEKA,KAAK2M,cAAL3M,GAIHA,KAAK2M,cAAL3M,CAAoB2F,QAApB3F,CAA6BkE,IAA7BlE,GAAoC2E,GAJjC3E,IACH+D,OAAAA,CAAQY,GAARZ,GAAcY,GAAdZ,EACA/D,KAAK4M,OAAL5M,CAAa+D,OAAb/D,CAFGA,CAFLA,EASAA,KAAK6N,qBAAL7N,GAA6B,UAAS8N,KAAT,EAASA;AACpCjB,MAAAA,KAAAA,CAAMkB,YAANlB,CAAmBiB,KAAnBjB,EAA0Be,EAA1Bf;AAA0Be,KAV5B5N,EAaAA,KAAKgO,qBAALhO,GAA6B,UAAS8N,KAAT,EAASA;AACpCjB,MAAAA,KAAAA,CAAMoB,YAANpB,CAAmBiB,KAAnBjB,EAA0Be,EAA1Bf;AAA0Be,KAd5B5N,EAiBAA,KAAKkO,oBAALlO,GAA4B,YAAA;AAC1B6M,MAAAA,KAAAA,CAAMsB,WAANtB,CAAkBe,EAAlBf;AAAkBe,KAlBpB5N,EAqBAA,KAAK2M,cAAL3M,CAAoBoO,gBAApBpO,CAAqC,WAArCA,EAAkDA,KAAK6N,qBAAvD7N,CArBAA,EAsBAA,KAAK2M,cAAL3M,CAAoBoO,gBAApBpO,CAAqC,WAArCA,EAAkDA,KAAKgO,qBAAvDhO,CAtBAA,EAuBAA,KAAK2M,cAAL3M,CAAoBoO,gBAApBpO,CAAqC,MAArCA,EAA6CA,KAAKkO,oBAAlDlO,CAvBAA;AAuBkDkO,GAxDpDzB,EA2DAA,YAAAA,CAAa/N,SAAb+N,CAAuBsB,YAAvBtB,GAAsC,UAASqB,KAAT,EAAgBF,EAAhB,EAAgBA;AAC/C5N,SAAK2M,cAAL3M,KAILA,KAAK2M,cAAL3M,CAAoBuN,IAApBvN,CAAoBuN,CAAK,CAAzBvN,GAEA4N,EAAAA,CAAG;AAAES,MAAAA,KAAAA,EAAO,cAAT;AAAyBC,MAAAA,gBAAAA,EAAkBR,KAAAA,CAAMtO;AAAjD,KAAHoO,CANK5N;AAM+CR,GAlEtDiN,EAqEAA,YAAAA,CAAa/N,SAAb+N,CAAuB8B,MAAvB9B,GAAgC,YAAA;AAC9BzM,SAAK2M,cAAL3M,CAAoBwO,mBAApBxO,CACE,WADFA,EAEEA,KAAK6N,qBAFP7N,GAIAA,KAAK2M,cAAL3M,CAAoBwO,mBAApBxO,CACE,WADFA,EAEEA,KAAKgO,qBAFPhO,CAJAA,EAQAA,KAAK2M,cAAL3M,CAAoBwO,mBAApBxO,CAAwC,MAAxCA,EAAgDA,KAAKkO,oBAArDlO,CARAA;AAQqDkO,GA9EvDzB,EAiFAA,YAAAA,CAAa/N,SAAb+N,CAAuB0B,WAAvB1B,GAAqC,UAASmB,EAAT,EAASA;AACvC5N,SAAK2M,cAAL3M,KAOLA,KAAKuO,MAALvO,IAEKA,KAAK2M,cAAL3M,CAAoBwN,OAApBxN,IACH4N,EAAAA,CAAG;AAAES,MAAAA,KAAAA,EAAO,eAAT;AAA0BC,MAAAA,gBAAAA,EAAkB;AAA5C,KAAHV,CAVG5N;AAU4C,GA5FnDyM,EAgGAA,YAAAA,CAAa/N,SAAb+N,CAAuBwB,YAAvBxB,GAAsC,UAASqB,KAAT,EAAgBF,EAAhB,EAAgBA;AACpD,QAAIf,KAAAA,GAAQ7M,IAAZ;;AAEA,QAAKA,KAAK2M,cAAV,EAAA;AAIA,UAAI8B,WAAAA,GAAcC,OAAAA,CAChB,QADgBA,EAEhB1O,KAAK0M,OAAL1M,CAAa2O,WAAb3O,CAAyB4O,MAFTF,EAGhB,SAHgBA,CAAlB;;AAMA,UAAA,CAAIZ,KAAAA,CAAMnJ,GAAV,IAA4D,MAAzCmJ,KAAAA,CAAMnJ,GAANmJ,CAAU1O,OAAV0O,CAAkBW,WAAAA,GAAc,GAAhCX,CAAnB,EAAA;AAIA,YAAI3K,KAAAA,GAAQ2K,KAAAA,CAAMnJ,GAANmJ,CAAU1K,KAAV0K,CAAgB,GAAhBA,CAAZ;;AAEA,YAAqB,MAAjB3K,KAAAA,CAAMxD,MAAV,EAAA;AAIA,cAAI0M,IAAAA,GAAO;AAAE3H,YAAAA,IAAAA,EAAMvB,KAAAA,CAAM8D,GAAN9D;AAAR,WAAX;AAEInD,eAAK+D,OAAL/D,CAAa6O,KAAb7O,KACFqM,IAAAA,CAAKwC,KAALxC,GAAarM,KAAK+D,OAAL/D,CAAa6O,KADxB7O,GAIJA,KAAK0M,OAAL1M,CAAa8O,SAAb9O,CAAuBqM,IAAvBrM,EAA6B,UAASqO,KAAT,EAAgBU,MAAhB,EAAgBA;AAAAA,aACvCV,KAAAA,IAASU,MAD8BA,MAEzClC,KAAAA,CAAMF,cAANE,CAAqBU,IAArBV,CAAqBU,CAAK,CAA1BV,GACAe,EAAAA,CAAGS,KAAHT,EAAUmB,MAAVnB,CAHyCmB;AAG/BA,WAHd/O,CAJIA;AAOU+O;AAAAA;AAAAA;AAAAA,GAhIhBtC,ECHAuC,aAAAA,CAActQ,SAAdsQ,CAAwBC,aAAxBD,GAAwC,UAAS9M,MAAT,EAASA;AAG/C,WAFAA,MAAAA,CAAOgN,WAAPhN,GAAqBwM,OAAAA,CAAQ,aAAaxM,MAAAA,CAAO0M,MAA5BF,EAAoC,QAApCA,CAArBxM,EAAyD,OAClDA,MAAAA,CAAOiN,GADdjN,EAEOA,MAAP;AAAOA,GDATuK,ECGAuC,aAAAA,CAActQ,SAAdsQ,CAAwBI,eAAxBJ,GAA0C,YAAA;AACxC,WAAO,IAAIvC,YAAJ,CAAiBzM,KAAK0M,OAAtB,CAAP;AAA6BA,GDJ/BD,EEAA4C,aAAAA,CAAc3Q,SAAd2Q,CAAwBG,UAAxBH,GAAqC,UAAS3C,OAAT,EAASA;AAC5C1M,SAAK0M,OAAL1M,GAAe0M,OAAf1M;AAAe0M,GFDjBD,EEIA4C,aAAAA,CAAc3Q,SAAd2Q,CAAwBI,QAAxBJ,GAAmC,UAASK,kBAAT,EAASA;AAC1C,QAAI5C,OAAAA,GAAUC,aAAAA,CAAcrH,SAAdqH,EAAd;;AACA,WAAA,CAAA,CAAA,CACKD,OAAAA,CAAQ6C,OADb,IACaA,CAAAA,CAAa7C,OAAAA,CAAQ8C,QADlC,KAEE5P,KAAKuP,mBAALvP,CAAyBZ,OAAzBY,CAAiC0P,kBAAjC1P,IAAiC0P,CAAuB,CAF1D;AAE0D,GFR5DjD,EEYA4C,aAAAA,CAAc3Q,SAAd2Q,CAAwBQ,IAAxBR,GAA+B,YAAA;AAC7B,WAAO,IAAIL,aAAJ,CAAkBhP,KAAK0M,OAAvB,CAAP;AAA8BA,GFbhCD,EEagCC,aAhBiB;AAgBjBA,C","sourcesContent":["module.exports = { raw: '9.14.0' };\n","var toString = Object.prototype.toString;\n\nfunction attribute(o, attr, type, text) {\n  type = type === 'array' ? 'object' : type;\n  if (o && typeof o[attr] !== type) {\n    throw new Error(text);\n  }\n}\n\nfunction variable(o, type, text) {\n  if (typeof o !== type) {\n    throw new Error(text);\n  }\n}\n\nfunction value(o, values, text) {\n  if (values.indexOf(o) === -1) {\n    throw new Error(text);\n  }\n}\n\nfunction check(o, config, attributes) {\n  if (!config.optional || o) {\n    variable(o, config.type, config.message);\n  }\n  if (config.type === 'object' && attributes) {\n    var keys = Object.keys(attributes);\n\n    for (var index = 0; index < keys.length; index++) {\n      var a = keys[index];\n      if (!attributes[a].optional || o[a]) {\n        if (!attributes[a].condition || attributes[a].condition(o)) {\n          attribute(o, a, attributes[a].type, attributes[a].message);\n          if (attributes[a].values) {\n            value(o[a], attributes[a].values, attributes[a].value_message);\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Wrap `Array.isArray` Polyfill for IE9\n * source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\n *\n * @param {Array} array\n * @private\n */\nfunction isArray(array) {\n  if (this.supportsIsArray()) {\n    return Array.isArray(array);\n  }\n\n  return toString.call(array) === '[object Array]';\n}\n\nfunction supportsIsArray() {\n  return Array.isArray != null;\n}\n\nexport default {\n  check: check,\n  attribute: attribute,\n  variable: variable,\n  value: value,\n  isArray: isArray,\n  supportsIsArray: supportsIsArray\n};\n","/* eslint-disable no-continue */\n\nfunction get() {\n  if (!Object.assign) {\n    return objectAssignPolyfill;\n  }\n\n  return Object.assign;\n}\n\nfunction objectAssignPolyfill(target) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (\n      var nextIndex = 0, len = keysArray.length;\n      nextIndex < len;\n      nextIndex++\n    ) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nexport default {\n  get: get,\n  objectAssignPolyfill: objectAssignPolyfill\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\n\nimport assert from './assert';\nimport objectAssign from './object-assign';\n\nfunction pick(object, keys) {\n  return keys.reduce(function(prev, key) {\n    if (object[key]) {\n      prev[key] = object[key];\n    }\n    return prev;\n  }, {});\n}\n\nfunction getKeysNotIn(obj, allowedKeys) {\n  var notAllowed = [];\n  for (var key in obj) {\n    if (allowedKeys.indexOf(key) === -1) {\n      notAllowed.push(key);\n    }\n  }\n  return notAllowed;\n}\n\nfunction objectValues(obj) {\n  var values = [];\n  for (var key in obj) {\n    values.push(obj[key]);\n  }\n  return values;\n}\n\nfunction extend() {\n  var params = objectValues(arguments);\n  params.unshift({});\n  return objectAssign.get().apply(undefined, params);\n}\n\nfunction merge(object, keys) {\n  return {\n    base: keys ? pick(object, keys) : object,\n    with: function(object2, keys2) {\n      object2 = keys2 ? pick(object2, keys2) : object2;\n      return extend(this.base, object2);\n    }\n  };\n}\n\nfunction blacklist(object, blacklistedKeys) {\n  return Object.keys(object).reduce(function(p, key) {\n    if (blacklistedKeys.indexOf(key) === -1) {\n      p[key] = object[key];\n    }\n    return p;\n  }, {});\n}\n\nfunction camelToSnake(str) {\n  var newKey = '';\n  var index = 0;\n  var code;\n  var wasPrevNumber = true;\n  var wasPrevUppercase = true;\n\n  while (index < str.length) {\n    code = str.charCodeAt(index);\n    if (\n      (!wasPrevUppercase && code >= 65 && code <= 90) ||\n      (!wasPrevNumber && code >= 48 && code <= 57)\n    ) {\n      newKey += '_';\n      newKey += str[index].toLowerCase();\n    } else {\n      newKey += str[index].toLowerCase();\n    }\n    wasPrevNumber = code >= 48 && code <= 57;\n    wasPrevUppercase = code >= 65 && code <= 90;\n    index++;\n  }\n\n  return newKey;\n}\n\nfunction snakeToCamel(str) {\n  var parts = str.split('_');\n  return parts.reduce(function(p, c) {\n    return p + c.charAt(0).toUpperCase() + c.slice(1);\n  }, parts.shift());\n}\n\nfunction toSnakeCase(object, exceptions) {\n  if (typeof object !== 'object' || assert.isArray(object) || object === null) {\n    return object;\n  }\n  exceptions = exceptions || [];\n\n  return Object.keys(object).reduce(function(p, key) {\n    var newKey = exceptions.indexOf(key) === -1 ? camelToSnake(key) : key;\n    p[newKey] = toSnakeCase(object[key]);\n    return p;\n  }, {});\n}\n\nfunction toCamelCase(object, exceptions, options) {\n  if (typeof object !== 'object' || assert.isArray(object) || object === null) {\n    return object;\n  }\n\n  exceptions = exceptions || [];\n  options = options || {};\n  return Object.keys(object).reduce(function(p, key) {\n    var newKey = exceptions.indexOf(key) === -1 ? snakeToCamel(key) : key;\n\n    p[newKey] = toCamelCase(object[newKey] || object[key], [], options);\n\n    if (options.keepOriginal) {\n      p[key] = toCamelCase(object[key], [], options);\n    }\n    return p;\n  }, {});\n}\n\nfunction getLocationFromUrl(href) {\n  var match = href.match(\n    /^(https?:|file:|chrome-extension:)\\/\\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/\n  );\n  return (\n    match && {\n      href: href,\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    }\n  );\n}\n\nfunction getOriginFromUrl(url) {\n  if (!url) {\n    return undefined;\n  }\n  var parsed = getLocationFromUrl(url);\n  if (!parsed) {\n    return null;\n  }\n  var origin = parsed.protocol + '//' + parsed.hostname;\n  if (parsed.port) {\n    origin += ':' + parsed.port;\n  }\n  return origin;\n}\n\nfunction trim(options, key) {\n  var trimmed = extend(options);\n  if (options[key]) {\n    trimmed[key] = options[key].trim();\n  }\n  return trimmed;\n}\n\nfunction trimMultiple(options, keys) {\n  return keys.reduce(trim, options);\n}\n\nfunction trimUserDetails(options) {\n  return trimMultiple(options, ['username', 'email', 'phoneNumber']);\n}\n\n/**\n * Updates the value of a property on the given object, using a deep path selector.\n * @param {object} obj The object to set the property value on\n * @param {string|array} path The path to the property that should have its value updated. e.g. 'prop1.prop2.prop3' or ['prop1', 'prop2', 'prop3']\n * @param {any} value The value to set\n */\nfunction updatePropertyOn(obj, path, value) {\n  if (typeof path === 'string') {\n    path = path.split('.');\n  }\n\n  var next = path[0];\n\n  if (obj.hasOwnProperty(next)) {\n    if (path.length === 1) {\n      obj[next] = value;\n    } else {\n      updatePropertyOn(obj[next], path.slice(1), value);\n    }\n  }\n}\n\nexport default {\n  toSnakeCase: toSnakeCase,\n  toCamelCase: toCamelCase,\n  blacklist: blacklist,\n  merge: merge,\n  pick: pick,\n  getKeysNotIn: getKeysNotIn,\n  extend: extend,\n  getOriginFromUrl: getOriginFromUrl,\n  getLocationFromUrl: getLocationFromUrl,\n  trimUserDetails: trimUserDetails,\n  updatePropertyOn: updatePropertyOn\n};\n","import objectHelper from './object';\n\nfunction redirect(url) {\n  getWindow().location = url;\n}\n\nfunction getDocument() {\n  return getWindow().document;\n}\n\nfunction getWindow() {\n  return window;\n}\n\nfunction getOrigin() {\n  var location = getWindow().location;\n  var origin = location.origin;\n\n  if (!origin) {\n    origin = objectHelper.getOriginFromUrl(location.href);\n  }\n\n  return origin;\n}\n\nexport default {\n  redirect: redirect,\n  getDocument: getDocument,\n  getWindow: getWindow,\n  getOrigin: getOrigin\n};\n","(function (name, context, definition) {\n  if (typeof module !== 'undefined' && module.exports) module.exports = definition();\n  else if (typeof define === 'function' && define.amd) define(definition);\n  else context[name] = definition();\n})('urljoin', this, function () {\n\n  function normalize (strArray) {\n    var resultArray = [];\n    if (strArray.length === 0) { return ''; }\n\n    if (typeof strArray[0] !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + strArray[0]);\n    }\n\n    // If the first part is a plain protocol, we combine it with the next part.\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n      var first = strArray.shift();\n      strArray[0] = first + strArray[0];\n    }\n\n    // There must be two or three slashes in the file protocol, two slashes in anything else.\n    if (strArray[0].match(/^file:\\/\\/\\//)) {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n    } else {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n    }\n\n    for (var i = 0; i < strArray.length; i++) {\n      var component = strArray[i];\n\n      if (typeof component !== 'string') {\n        throw new TypeError('Url must be a string. Received ' + component);\n      }\n\n      if (component === '') { continue; }\n\n      if (i > 0) {\n        // Removing the starting slashes for each component but the first.\n        component = component.replace(/^[\\/]+/, '');\n      }\n      if (i < strArray.length - 1) {\n        // Removing the ending slashes for each component but the last.\n        component = component.replace(/[\\/]+$/, '');\n      } else {\n        // For the last component we will combine multiple slashes to a single one.\n        component = component.replace(/[\\/]+$/, '/');\n      }\n\n      resultArray.push(component);\n\n    }\n\n    var str = resultArray.join('/');\n    // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n    // remove trailing slash before parameters or hash\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    var parts = str.split('?');\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n    return str;\n  }\n\n  return function () {\n    var input;\n\n    if (typeof arguments[0] === 'object') {\n      input = arguments[0];\n    } else {\n      input = [].slice.call(arguments);\n    }\n\n    return normalize(input);\n  };\n\n});\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        }).join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n        var value = obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj; // eslint-disable-line no-param-reassign\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","import windowHandler from '../../src/helper/window';\nimport qs from 'qs';\nimport urljoin from 'url-join';\n\nfunction PopupHandler(webAuth) {\n  this.webAuth = webAuth;\n  this._current_popup = null;\n  this.options = null;\n}\n\nPopupHandler.prototype.preload = function(options) {\n  var _this = this;\n  var _window = windowHandler.getWindow();\n\n  var url = options.url || 'about:blank';\n  var popupOptions = options.popupOptions || {};\n\n  popupOptions.location = 'yes';\n  delete popupOptions.width;\n  delete popupOptions.height;\n\n  var windowFeatures = qs.stringify(popupOptions, {\n    encode: false,\n    delimiter: ','\n  });\n\n  if (this._current_popup && !this._current_popup.closed) {\n    return this._current_popup;\n  }\n\n  this._current_popup = _window.open(url, '_blank', windowFeatures);\n\n  this._current_popup.kill = function(success) {\n    _this._current_popup.success = success;\n    this.close();\n    _this._current_popup = null;\n  };\n\n  return this._current_popup;\n};\n\nPopupHandler.prototype.load = function(url, _, options, cb) {\n  var _this = this;\n  this.url = url;\n  this.options = options;\n  if (!this._current_popup) {\n    options.url = url;\n    this.preload(options);\n  } else {\n    this._current_popup.location.href = url;\n  }\n\n  this.transientErrorHandler = function(event) {\n    _this.errorHandler(event, cb);\n  };\n\n  this.transientStartHandler = function(event) {\n    _this.startHandler(event, cb);\n  };\n\n  this.transientExitHandler = function() {\n    _this.exitHandler(cb);\n  };\n\n  this._current_popup.addEventListener('loaderror', this.transientErrorHandler);\n  this._current_popup.addEventListener('loadstart', this.transientStartHandler);\n  this._current_popup.addEventListener('exit', this.transientExitHandler);\n};\n\nPopupHandler.prototype.errorHandler = function(event, cb) {\n  if (!this._current_popup) {\n    return;\n  }\n\n  this._current_popup.kill(true);\n\n  cb({ error: 'window_error', errorDescription: event.message });\n};\n\nPopupHandler.prototype.unhook = function() {\n  this._current_popup.removeEventListener(\n    'loaderror',\n    this.transientErrorHandler\n  );\n  this._current_popup.removeEventListener(\n    'loadstart',\n    this.transientStartHandler\n  );\n  this._current_popup.removeEventListener('exit', this.transientExitHandler);\n};\n\nPopupHandler.prototype.exitHandler = function(cb) {\n  if (!this._current_popup) {\n    return;\n  }\n\n  // when the modal is closed, this event is called which ends up removing the\n  // event listeners. If you move this before closing the modal, it will add ~1 sec\n  // delay between the user being redirected to the callback and the popup gets closed.\n  this.unhook();\n\n  if (!this._current_popup.success) {\n    cb({ error: 'window_closed', errorDescription: 'Browser window closed' });\n  }\n};\n\nPopupHandler.prototype.startHandler = function(event, cb) {\n  var _this = this;\n\n  if (!this._current_popup) {\n    return;\n  }\n\n  var callbackUrl = urljoin(\n    'https:',\n    this.webAuth.baseOptions.domain,\n    '/mobile'\n  );\n\n  if (event.url && !(event.url.indexOf(callbackUrl + '#') === 0)) {\n    return;\n  }\n\n  var parts = event.url.split('#');\n\n  if (parts.length === 1) {\n    return;\n  }\n\n  var opts = { hash: parts.pop() };\n\n  if (this.options.nonce) {\n    opts.nonce = this.options.nonce;\n  }\n\n  this.webAuth.parseHash(opts, function(error, result) {\n    if (error || result) {\n      _this._current_popup.kill(true);\n      cb(error, result);\n    }\n  });\n};\n\nexport default PopupHandler;\n","import urljoin from 'url-join';\nimport PopupHandler from './popup-handler';\n\nfunction PluginHandler(webAuth) {\n  this.webAuth = webAuth;\n}\n\nPluginHandler.prototype.processParams = function(params) {\n  params.redirectUri = urljoin('https://' + params.domain, 'mobile');\n  delete params.owp;\n  return params;\n};\n\nPluginHandler.prototype.getPopupHandler = function() {\n  return new PopupHandler(this.webAuth);\n};\n\nexport default PluginHandler;\n","import version from '../../src/version';\nimport windowHandler from '../../src/helper/window';\nimport PluginHandler from './plugin-handler';\n\nfunction CordovaPlugin() {\n  this.webAuth = null;\n  this.version = version.raw;\n  this.extensibilityPoints = ['popup.authorize', 'popup.getPopupHandler'];\n}\n\nCordovaPlugin.prototype.setWebAuth = function(webAuth) {\n  this.webAuth = webAuth;\n};\n\nCordovaPlugin.prototype.supports = function(extensibilityPoint) {\n  var _window = windowHandler.getWindow();\n  return (\n    (!!_window.cordova || !!_window.electron) &&\n    this.extensibilityPoints.indexOf(extensibilityPoint) > -1\n  );\n};\n\nCordovaPlugin.prototype.init = function() {\n  return new PluginHandler(this.webAuth);\n};\n\nexport default CordovaPlugin;\n"]},"metadata":{},"sourceType":"script"}